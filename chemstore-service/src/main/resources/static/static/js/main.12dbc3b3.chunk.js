(this["webpackJsonpchemstore-client"]=this["webpackJsonpchemstore-client"]||[]).push([[0],{137:function(e,t,a){},138:function(e,t,a){},193:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(44),r=a.n(s),i=(a(137),a(138),a(26)),l=a(8),o=a(4),d=a.n(o),u=a(10),m=a(3),b=a.n(m),h=a(102),j=a(55),p=a(119),O="GET_ERRORS",f="SET_CURRENT_USER",x="SELECT_LAB",v="FILL_LAB_DROPDOWN",g={};var y=a(6),N={user:{},validToken:!1};var w=[];var k=Object(j.b)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.payload:e},security:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;return t.type===f?Object(y.a)(Object(y.a)({},e),{},{validToken:!!t.payload,user:t.payload}):e},selectedLab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===x?t.payload:e},labs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;return t.type===v?(console.log("state in selectedLabReducer: "+e),t.payload.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{id:e.id,value:e.key,label:e.name})}))):e}}),S={},C=[p.a],L=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),M=window.navigator.userAgent.includes("Chrome")&&L?Object(j.d)(k,S,Object(j.c)(j.a.apply(void 0,C),L)):Object(j.d)(k,S,Object(j.c)(j.a.apply(void 0,C))),I=function(e){e?b.a.defaults.headers.common.Authorization=e:delete b.a.defaults.headers.common.Authorization},A=function(e,t){return e.key&&(t.labsAsAdmin.includes(e.value)||e.labManagers.map((function(e){return e.username})).includes(t.username))},D=function(e,t){return e.key&&t&&e.labManagers.filter((function(e){return e.username===t.username})).length>0},F=function(e){return e.username&&e.authorities.map((function(e){return e.authority})).includes("ACCOUNT_MANAGER")},E=function(){localStorage.removeItem("jwt"),localStorage.removeItem("selectedLab"),I(!1),M.dispatch({type:f,payload:{}})},P=function(){U()},U=function(){var e=localStorage.jwt;if(e){var t=Object(h.a)(e),a=Date.now()/1e3;t.exp<a&&(console.log("token expired"),E(),window.location.replace("/"))}},R=function(){var e=localStorage.jwt;if(e){var t=Object(h.a)(e),a=Date.now()/1e3;t.exp<a?(console.log("token expired"),E(),window.location.replace("/")):(I(e),M.dispatch({type:f,payload:t}),T())}},T=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/logged-in/lab?onlyAvailable=true");case 3:t=e.sent,M.dispatch({type:v,payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=(a(161),a(128)),z=a(218),_=a(219),q=a(127),H=a(0),K=function(){var e=Object(l.c)((function(e){return e.security})),t=Object(l.c)((function(e){return e.labs})),a=Object(l.c)((function(e){return e.selectedLab})),n=e.user,s=n&&"{}"!==JSON.stringify(n),r=function(e){localStorage.setItem("".concat(n.username.split("@")[0],".selectedLab"),e.key),M.dispatch({type:x,payload:e})};Object(c.useEffect)((function(){if(s&&t.length>0){var e="".concat(n.username.split("@")[0],".selectedLab"),a=localStorage.getItem(e);if(a){var c=t.filter((function(e){return e.key===a}))[0];r(c)}else 1===t.length&&r(t[0])}}),[t,e]);var o=Object(H.jsx)("li",{className:"nav-item",children:Object(H.jsx)(i.b,{to:"/user-manual",className:"nav-link",children:Object(H.jsx)("i",{className:"fas fa-question-circle"})})}),d=Object(H.jsxs)("div",{className:"collapse navbar-collapse",id:"mobile-nav",children:[Object(H.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(H.jsx)(z.a,{children:Object(H.jsxs)(_.a,{as:z.a,title:Object(H.jsx)("i",{style:{color:"#88b7fc"},className:"fas",children:"Account"}),id:"bg-nested-dropdown",children:[Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/users",style:{textDecoration:"none"},children:"Users"}),Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/labs",style:{textDecoration:"none"},children:"Labs"}),Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/manufacturers",style:{textDecoration:"none"},children:"Manufacturers"})]})}),Object(H.jsx)(z.a,{children:Object(H.jsxs)(_.a,{as:z.a,title:Object(H.jsx)("i",{style:{color:"#88b7fc"},className:"fas",children:"Lab"}),id:"bg-nested-dropdown",children:[Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/categories",style:{textDecoration:"none"},children:"Categories"}),Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/chemicals",style:{textDecoration:"none"},children:"Chemicals"}),Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/projects",style:{textDecoration:"none"},children:"Projects"}),Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/recipes",style:{textDecoration:"none"},children:"Recipes"})]})}),Object(H.jsx)("li",{className:"nav-item",children:Object(H.jsx)(i.b,{className:"nav-link",to:"/chem-items",children:"Chem items"})}),Object(H.jsx)("li",{className:"nav-item",children:Object(H.jsx)(i.b,{className:"nav-link",to:"/mixtures",children:"Mixtures"})})]}),Object(H.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(H.jsx)("li",{className:"nav-item",children:Object(H.jsx)(B.a,{name:"form-field-name",value:a,onChange:r,options:t,placeholder:"Select lab"})},"react-select"),Object(H.jsx)("li",{className:"nav-item",children:Object(H.jsx)(z.a,{style:{paddingLeft:"10px",paddingRight:"10px"},children:Object(H.jsxs)(_.a,{as:z.a,title:Object(H.jsx)("i",{style:{color:"#dddddd"},className:"fas fa-user",children:n.fullName}),id:"bg-nested-dropdown",children:[Object(H.jsx)(q.a.Item,{eventKey:"1",href:"/change-password",style:{textDecoration:"none"},children:"Change Password"}),Object(H.jsx)(q.a.Item,{eventKey:"2",tag:i.b,to:"/",onClick:function(){E(),window.location.href="/"},style:{textDecoration:"none"},children:"Logout"})]})})}),o]})]}),u=Object(H.jsx)("div",{className:"collapse navbar-collapse",id:"mobile-nav",children:Object(H.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(H.jsx)("li",{className:"nav-item",children:Object(H.jsx)(i.b,{className:"nav-link",to:"/login",children:"Login"})}),o]})}),m=s?d:u;return Object(H.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-primary mb-4",children:Object(H.jsxs)("div",{className:"container",children:[Object(H.jsx)(i.b,{className:"navbar-brand",to:"/",children:"chemstore"}),m]})})},W=(a(179),a(25)),V=a(2),J=a(19),X=a.n(J),G=function(e){var t=e.chemItem,a=e.selectedLab,n=e.setters,s=e.values,r=e.history,i=s.chemical,o=s.manufacturer,d=s.unit,u=s.batchNumber,m=s.quantity,h=s.pieces,j=s.expirationDateBeforeOpened,p=s.arrivalDate,O=n.setChemicalShortName,f=n.setManufacturerId,x=n.setBatchNumber,v=n.setQuantity,g=n.setUnit,y=n.setPieces,N=n.setExpirationDateBeforeOpened,w=n.setArrivalDate,k=Object(l.c)((function(e){return e.security.user})),S=Object(c.useState)([]),C=Object(V.a)(S,2),L=C[0],M=C[1],I=Object(c.useState)([]),D=Object(V.a)(I,2),F=D[0],E=D[1],P=Object(c.useState)([]),U=Object(V.a)(P,2),R=U[0],T=U[1];return Object(c.useEffect)((function(){b.a.get("/api/logged-in/chemical/".concat(a.key)).then((function(e){return M(e.data)})),b.a.get("/api/logged-in/manufacturer").then((function(e){return E(e.data)})),b.a.get("/api/chem-item/unit").then((function(e){return T(e.data.map((function(e){return{unit:e}})))}))}),[]),Object(c.useEffect)((function(){a&&k&&!A(a,k)&&r.push("/chem-items")}),[a,k]),Object(H.jsxs)("div",{children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"chemical",className:"col-sm-4 col-form-label",children:"chemical"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:L,values:i?[i]:[],disabled:t,labelField:"shortName",valueField:"shortName",placeholder:"chemical",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){return e[0]&&O(e[0].shortName)}})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"manufacturer",className:"col-sm-4 col-form",children:"manufacturer"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:F,values:o?[o]:[],searchable:!1,clearable:!1,labelField:"name",valueField:"name",placeholder:"manufacturer",searchBy:"name",style:{height:"42px",fontSize:"16px"},onChange:function(e){return e[0]&&f(e[0].id)}})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"batchNumber",className:"col-sm-4 col-form-label",children:"batch number"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"batchNumber",value:u,onChange:function(e){return x(e.target.value)},type:"text",className:"form-control form-control-lg ",placeholder:"batch number"})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"quantity",className:"col-sm-4 col-form-label",children:"quantity"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"quantity",value:m,onChange:function(e){return v(e.target.value)},type:"text",className:"form-control form-control-lg ",placeholder:"quantity"})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"unit",className:"col-sm-4 col-form-label",children:"unit"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:R,values:d?[d]:[],labelField:"unit",placeholder:"unit",valueField:"unit",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){return e[0]&&g(e[0].unit)}})})]}),!t&&Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"amount",className:"col-sm-4 col-form-label",children:"pieces"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"pieces",value:h,onChange:function(e){return y(e.target.value)},type:"text",className:"form-control form-control-lg ",placeholder:"pieces"})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"expirationDateBeforeOpened",className:"col-sm-4 col-form-label",children:"Expiration date (before opened)"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"expirationDateBeforeOpened",value:j,onChange:function(e){return N(e.target.value)},type:"date",className:"form-control form-control-lg "})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"arrivalDate",className:"col-sm-4 col-form-label",children:"Arrival date"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"arrivalDate",value:p,onChange:function(e){return w(e.target.value)},type:"date",className:"form-control form-control-lg "})})]})]})},Q=function(){var e=Object(c.useState)(""),t=Object(V.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),r=Object(V.a)(s,2),i=r[0],o=r[1],m=Object(c.useState)(""),h=Object(V.a)(m,2),j=h[0],p=h[1],O=Object(c.useState)(1),f=Object(V.a)(O,2),x=f[0],v=f[1],g=Object(c.useState)(0),y=Object(V.a)(g,2),N=y[0],w=y[1],k=Object(c.useState)(""),S=Object(V.a)(k,2),C=S[0],L=S[1],M=Object(c.useState)(""),I=Object(V.a)(M,2),A=I[0],D=I[1],F=Object(c.useState)((new Date).toISOString().split("T")[0]),E=Object(V.a)(F,2),U=E[0],R=E[1],T=Object(c.useState)(""),B=Object(V.a)(T,2),z=B[0],_=B[1],q=Object(l.c)((function(e){return e.selectedLab})),K=Object(W.useHistory)();Object(c.useEffect)((function(){P()}));var J=function(){var e=Object(u.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),c={labKey:q.key,chemicalShortName:a,manufacturerId:i,unit:j,pieces:x,quantity:N,batchNumber:C,expirationDateBeforeOpened:A,arrivalDate:U},e.next=5,b.a.post("/api/chem-item",c).then((function(){return K.push("/chem-items")})).catch((function(e){return _(e.response.data)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X={setChemicalShortName:n,setManufacturerId:o,setBatchNumber:L,setQuantity:w,setUnit:p,setPieces:v,setExpirationDateBeforeOpened:D,setArrivalDate:R},Q={batchNumber:C,quantity:N,pieces:x,expirationDateBeforeOpened:A,arrivalDate:U};return Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h5",{className:"display-4 text-center",children:"Register chemical into ".concat(q.name)}),Object(H.jsx)("hr",{}),Object(H.jsx)("br",{}),z.message&&Object(H.jsx)("h5",{className:"text-danger",children:z.message}),Object(H.jsxs)("form",{onSubmit:J,children:[Object(H.jsx)(G,{selectedLab:q,setters:X,values:Q,history:K}),Object(H.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-4",children:"Register"})]})]})},Y=a(15),Z=a(16),$=a(18),ee=a(17),te=a(125),ae=(a(193),function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(Y.a)(this,a),t.apply(this,arguments)}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.security.user;e&&"{}"!==JSON.stringify(e)&&(T(),this.props.history.push("/chem-items"))}},{key:"render",value:function(){return Object(H.jsx)("div",{className:"landing",children:Object(H.jsx)("div",{className:"light-overlay landing-inner text-dark",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12 text-center",children:[Object(H.jsx)("h1",{className:"display-3 mb-4",children:"chemstore"}),Object(H.jsx)("p",{className:"lead",children:"If you are tired of administrating chemicals and eluents on paper"}),Object(H.jsx)("br",{}),Object(H.jsxs)("p",{className:"lead",children:[Object(H.jsx)("b",{children:"Log in"}),", to manage chamicals and register eluents in your lab"]}),Object(H.jsx)("hr",{}),Object(H.jsx)(i.b,{to:"/login",className:"lgbtn btn btn-primary mt-2",children:"Login"}),Object(H.jsx)(i.b,{to:"/user-manual",children:Object(H.jsxs)(te.a,{variant:"outline-primary",className:"lgbtn btn-block mt-2",children:[Object(H.jsx)("i",{className:"fas fa-question-circle"}),"Help"]})})]})})})})})}}]),a}(c.Component)),ce=Object(l.b)((function(e){return{security:e.security}}))(ae),ne=a(9),se=a(14),re=a(46),ie=a.n(re),le=a(11),oe=a.n(le),de=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={username:"",fullName:"",labsAsUser:[],labsAsAdmin:[],roles:[],labs:[],errors:{}},e.onChangeBasicInputs=e.onChangeBasicInputs.bind(Object(se.a)(e)),e.labsAsUserMultiSelect=n.a.createRef(),e.labsAsAdminMultiselect=n.a.createRef(),e.rolesMultiselect=n.a.createRef(),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){var e=this;P(),F(this.props.user)?(b.a.get("/api/logged-in/lab").then((function(t){return e.setState({labs:t.data})})).catch((function(t){return e.props.history.push("/users")})),b.a.get("/api/logged-in/role").then((function(t){return e.setState({roles:t.data})})).catch((function(t){return e.props.history.push("/users")}))):this.props.history.push("/users")}},{key:"onChangeBasicInputs",value:function(e){P(),this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={username:this.state.username,fullName:this.state.fullName,labKeysAsUser:this.labsAsUserMultiSelect.current.getSelectedItems().map((function(e){return e.key})),labKeysAsAdmin:this.labsAsAdminMultiselect.current.getSelectedItems().map((function(e){return e.key})),roles:this.rolesMultiselect.current.getSelectedItems().map((function(e){return e.key}))},e.prev=2,e.next=5,b.a.post("/api/account/user",a);case 5:this.props.history.push("/users"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"register",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Register"}),Object(H.jsx)("p",{className:"lead text-center",children:"Add new user"}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"username",className:"col-sm-4 col-form-label",children:"username"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"username",value:this.state.username,onChange:this.onChangeBasicInputs,type:"email",className:oe()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"username (email)"}),e.username&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.username})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"fullName",className:"col-sm-4 col-form-label",children:"Full name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"fullName",value:this.state.fullName,onChange:this.onChangeBasicInputs,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.fullName}),placeholder:"full name"}),e.fullName&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.fullName})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"labsAsUser",className:"col-sm-4 col-form-label",children:"Labs, where user can administrate (open, use, etc) chemicals"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"name",placeholder:"labs as user",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"16px"}},options:this.state.labs,ref:this.labsAsUserMultiSelect,showCheckbox:!0})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"labsAsAdmin",className:"col-sm-4 col-form-label",children:"Labs, where user is administrator"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"name",placeholder:"admin in labs",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"16px"}},options:this.state.labs,ref:this.labsAsAdminMultiselect,showCheckbox:!0})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"roles",className:"col-sm-4 col-form-label",children:"Additional roles"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"name",placeholder:"roles",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"16px"}},options:this.state.roles,ref:this.rolesMultiselect,showCheckbox:!0})})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Add User"})]})]})})})})}}]),a}(c.Component),ue=Object(l.b)((function(e){return{user:e.security.user}}))(de),me=(a(195),function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={username:"",password:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};this.props.login(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"login",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Log In"}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group mb-3",children:[Object(H.jsx)("input",{name:"username",value:this.state.username,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"Email Address"}),e.username&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.username})]}),Object(H.jsxs)("div",{className:"form-group mb-3",children:[Object(H.jsx)("input",{name:"password",value:this.state.password,onChange:this.onChange,type:"password",className:oe()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"Password"}),e.username&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(H.jsx)("input",{type:"submit",className:"lgbtn btn btn-info btn-block mt-4"})]})]})})})})}}]),a}(c.Component)),be=Object(l.b)((function(e){return{security:e.security,errors:e.errors}}),{login:function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(c){var n,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.post("/api/login",e);case 3:n=a.sent,s=n.data.token,localStorage.setItem("jwt",s),R(),T(),t.push("/chem-items"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),c({type:O,payload:a.t0.response.data});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}})(me),he=a(33),je=["component","security"],pe=Object(l.b)((function(e){return{security:e.security}}))((function(e){var t=e.component,a=e.security,c=Object(he.a)(e,je);return Object(H.jsx)(W.Route,Object(y.a)(Object(y.a)({},c),{},{render:function(e){return a.validToken?Object(H.jsx)(t,Object(y.a)({},e)):Object(H.jsx)(W.Redirect,{to:"login"})}}))}));var Oe=function(e){var t=e.objectToPass?e.objectToPass.formRoute:e.formRoute;return Object(H.jsx)(i.b,{to:{pathname:t,state:e.objectToPass},className:"btn btn-lg btn-info",children:e.buttonLabel})},fe=a(224),xe=(a(196),function(e){return Object(H.jsxs)("div",{id:"button-group",children:[Object(H.jsx)(i.b,{className:"".concat(e.updateDisabled&&"disabled-link"),to:e.updateFormTo,disabled:!0,onClick:P,children:Object(H.jsx)(fe.a,{className:"btn",variant:"outlined",size:"small",disabled:e.updateDisabled,children:Object(H.jsx)("i",{className:"fa fa-edit",children:"Update"})})}),Object(H.jsx)(fe.a,{className:"btn",color:"error",variant:"outlined",size:"small",onClick:function(){P(),e.onDelete()},children:Object(H.jsx)("i",{className:"fa fa-minus-circle",children:"Delete"})})]})}),ve=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var c;return Object(Y.a)(this,a),(c=t.call(this)).deleteUser=e.deleteUser,c}return Object(Z.a)(a,[{key:"render",value:function(){var e=this,t=this.props.user;return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"card card-body bg-light mb-3",children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsxs)("div",{className:"col-3",children:[Object(H.jsx)("span",{className:"mx-auto",children:t.username}),t.roles.length>0&&Object(H.jsxs)("div",{children:[Object(H.jsx)("br",{}),Object(H.jsxs)("span",{className:"mx-auto",children:["(",t.roles.map((function(e){return e.name})).join(","),")"]})]})]}),Object(H.jsxs)("div",{className:"col-lg-6",children:[Object(H.jsx)("h3",{children:t.fullName}),Object(H.jsx)("i",{children:"User in:  "}),Object(H.jsx)("strong",{children:t.labsAsUser.map((function(e){return e.name})).join(", ")}),Object(H.jsx)("br",{}),t.labsAsAdmin.length>0&&Object(H.jsxs)("div",{children:[Object(H.jsx)("i",{children:"Admin in:   "}),Object(H.jsx)("strong",{children:t.labsAsAdmin.map((function(e){return e.name})).join(",")}),Object(H.jsx)("br",{})]}),t.managedLabs.length>0&&Object(H.jsxs)("div",{children:[Object(H.jsx)("i",{children:"Managed labs:   "}),Object(H.jsx)("strong",{children:t.managedLabs.map((function(e){return e.name})).join(",")}),Object(H.jsx)("br",{})]})]}),Object(H.jsx)("div",{className:"col-md-3",children:this.props.isAccountManager&&Object(H.jsx)(xe,{updateFormTo:"/update-user/".concat(t.id),onDelete:function(){return e.deleteUser(t)}})})]})})})}}]),a}(c.Component),ge=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={users:[],errors:{deleted:{}}},e.deleteUser=e.deleteUser.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"deleteUser",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,!window.confirm("Are you sure yout want to delete ".concat(t.fullName," (").concat(t.username,")?"))){e.next=12;break}return e.prev=2,e.next=5,b.a.delete("/api/account/user/".concat(a));case 5:c=this.state.users.filter((function(e){return e.id!==a})),this.setState({users:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errors:{deleted:Object(ne.a)({},"id"+a,e.t0.response.data)}});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;R(),b.a.get("/api/logged-in/user").then((function(t){return e.setState({users:t.data})}))}},{key:"render",value:function(){var e=this,t=F(this.props.user);return Object(H.jsx)("div",{className:"users",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Users"}),Object(H.jsx)("br",{}),t&&Object(H.jsx)(Oe,{formRoute:"/add-user",buttonLabel:"Add User"}),Object(H.jsx)("br",{}),Object(H.jsx)("hr",{}),this.state.users.map((function(a){return Object(H.jsx)(ve,{isAccountManager:t,user:a,deleteUser:e.deleteUser,errors:e.state.errors.deleted["id"+a.id]?e.state.errors.deleted["id"+a.id]:{}},a.id)}))]})})})})}}]),a}(c.Component),ye=Object(l.b)((function(e){return{user:e.security.user}}))(ge),Ne=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={oldPassword:"",newPassword:"",newPassword2:"",errors:{}},e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e.onChangeBasicInputs=e.onChangeBasicInputs.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={oldPassword:this.state.oldPassword,newPassword:this.state.newPassword,newPassword2:this.state.newPassword2},e.prev=2,e.next=5,b.a.patch("/api/logged-in/user",a);case 5:this.props.history.push("/chem-items"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onChangeBasicInputs",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"change-password",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Change Password"}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"oldPassword",className:"col-sm-4 col-form-label",children:"Old password"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"oldPassword",value:this.state.oldPassword,onChange:this.onChangeBasicInputs,type:"password",className:oe()("form-control form-control-lg",{"is-invalid":e.oldPassword}),placeholder:"old password"}),e.oldPassword&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.oldPassword})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"newPassword",className:"col-sm-4 col-form-label",children:"New password"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"newPassword",value:this.state.newPassword,onChange:this.onChangeBasicInputs,type:"password",className:oe()("form-control form-control-lg",{"is-invalid":e.newPassword}),placeholder:"new password"}),e.newPassword&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.newPassword})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"newPassword2",className:"col-sm-4 col-form-label",children:"New password (again)"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"newPassword2",value:this.state.newPassword2,onChange:this.onChangeBasicInputs,type:"password",className:oe()("form-control form-control-lg",{"is-invalid":e.newPassword2}),placeholder:"new password (again)"}),e.newPassword2&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.newPassword2})]})]}),Object(H.jsx)("input",{type:"submit",className:"btn btn-info btn-block mt-4"})]})]})})})})}}]),a}(c.Component),we=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={username:"",fullName:"",labsAsUser:[],labsAsAdmin:[],roles:[],labs:[],persistedUser:{username:"",fullName:"",labsAsUser:[{name:"foo"},{name:"bar"},{name:"baz"}],labsAsAdmin:[],roles:[]},errors:{}},e.onChangeBasicInputs=e.onChangeBasicInputs.bind(Object(se.a)(e)),e.labsAsUserMultiSelect=n.a.createRef(),e.labsAsAdminMultiselect=n.a.createRef(),e.rolesMultiselect=n.a.createRef(),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(P(),F(this.props.user)){var t=this.props.match.params.id;this.setState({id:t}),b.a.get("/api/logged-in/lab").then((function(t){return e.setState({labs:t.data})})),b.a.get("/api/logged-in/role").then((function(t){return e.setState({roles:t.data})})),b.a.get("/api/account/user/".concat(t)).then((function(t){e.setState({persistedUser:t.data,username:t.data.username,fullName:t.data.fullName})}))}else this.props.history.push("/users")}},{key:"onChangeBasicInputs",value:function(e){P(),this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={username:this.state.username,fullName:this.state.fullName,labKeysAsUser:this.labsAsUserMultiSelect.current.getSelectedItems().map((function(e){return e.key})),labKeysAsAdmin:this.labsAsAdminMultiselect.current.getSelectedItems().map((function(e){return e.key})),roles:this.rolesMultiselect.current.getSelectedItems().map((function(e){return e.key}))},e.prev=2,e.next=5,b.a.put("/api/account/user/".concat(this.state.id),a);case 5:this.props.history.push("/users"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"register",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Update User"}),Object(H.jsx)("p",{className:"lead text-center",children:"Update existing user"}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"username",className:"col-sm-4 col-form-label",children:"username"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"username",value:this.state.username,onChange:this.onChangeBasicInputs,type:"email",className:oe()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"username (email)"}),e.username&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.username})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"fullName",className:"col-sm-4 col-form-label",children:"Full name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"fullName",value:this.state.fullName,onChange:this.onChangeBasicInputs,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.fullName}),placeholder:"full name"}),e.fullName&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.fullName})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"labsAsUser",className:"col-sm-4 col-form-label",children:"Labs, where user can administrate (open, use, etc) chemicals"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"name",placeholder:"labs as user",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"20px"}},options:this.state.labs,selectedValues:this.state.persistedUser.labsAsUser,ref:this.labsAsUserMultiSelect,showCheckbox:!0})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"labsAsAdmin",className:"col-sm-4 col-form-label",children:"Labs, where user is administrator"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"name",placeholder:"admin in labs",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"20px"}},options:this.state.labs,selectedValues:this.state.persistedUser.labsAsAdmin,ref:this.labsAsAdminMultiselect,showCheckbox:!0})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"roles",className:"col-sm-4 col-form-label",children:"Additional roles"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"name",placeholder:"roles",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"20px"}},options:this.state.roles,selectedValues:this.state.persistedUser.roles,ref:this.rolesMultiselect,showCheckbox:!0})})]}),Object(H.jsx)("button",{type:"submit",className:"d-flex p-2 btn btn-info btn-block mt-4",children:"Update User"})]})]})})})})}}]),a}(c.Component),ke=Object(l.b)((function(e){return{user:e.security.user}}))(we),Se=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var c;return Object(Y.a)(this,a),(c=t.call(this)).state={errors:{}},c.deleteNamedEntity=e.deleteNamedEntity,c}return Object(Z.a)(a,[{key:"render",value:function(){var e=this,t=this.props.namedEntity;return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"card card-body bg-light mb-3",style:{padding:"10px"},children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-sm-9",children:Object(H.jsx)("h4",{children:t.name})}),Object(H.jsx)("div",{className:"col-sm-3",children:this.props.isAdmin&&Object(H.jsx)(xe,{updateFormTo:"".concat(this.props.updateUrl,"/").concat(t.id),onDelete:function(){return e.deleteNamedEntity(t)}})})]})})})}}]),a}(c.Component),Ce=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={manufacturers:[],errors:{deleted:{}}},e.deleteManufacturer=e.deleteManufacturer.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"deleteManufacturer",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,!window.confirm("Are you sure you want to delete '".concat(t.name,"'?"))){e.next=12;break}return e.prev=2,e.next=5,b.a.delete("/api/lab-admin/manufacturer/".concat(a));case 5:c=this.state.manufacturers.filter((function(e){return e.id!==a})),this.setState({manufacturers:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errors:{deleted:Object(ne.a)({},"id"+a,e.t0.response.data)}});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;R(),b.a.get("/api/logged-in/manufacturer").then((function(t){return e.setState({manufacturers:t.data})}))}},{key:"render",value:function(){var e=this,t=this.props.user.authorities.some((function(e){return"LAB_MANAGER"===e.authority||"LAB_ADMIN"===e.authority}));return Object(H.jsx)("div",{className:"manufacturers",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Manufacturers"}),Object(H.jsx)("br",{}),t&&Object(H.jsx)(Oe,{formRoute:"/add-manufacturer",buttonLabel:"Add Manufacturer"}),Object(H.jsx)("br",{}),Object(H.jsx)("hr",{}),this.state.manufacturers.map((function(a){return Object(H.jsx)(Se,{isAdmin:t,namedEntity:a,updateUrl:"/update-manufacturer",deleteNamedEntity:e.deleteManufacturer,errors:e.state.errors.deleted["id"+a.id]?e.state.errors.deleted["id"+a.id]:{}},a.id)}))]})})})})}}]),a}(c.Component),Le=Object(l.b)((function(e){return{user:e.security.user}}))(Ce),Me=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={name:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={name:this.state.name},e.prev=2,e.next=5,b.a.post("/api/lab-admin/manufacturer",a);case 5:this.props.history.push("/manufacturers"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"add-manufacturer",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Add Manufacturer"}),Object(H.jsx)("p",{className:"lead text-center",children:"Create a manufacturer (for the whole account/company)"}),Object(H.jsx)("br",{}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"username",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:this.state.name,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"manufacturer name"}),e.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.name})]})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Add Manufacturer"})]})]})})})})}}]),a}(c.Component),Ie=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={name:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/api/lab-admin/manufacturer/".concat(this.props.match.params.id)).then((function(t){return e.setState({name:t.data.name})}))}},{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={name:this.state.name},e.prev=3,e.next=6,b.a.put("/api/lab-admin/manufacturer/".concat(this.props.match.params.id),a);case 6:this.props.history.push("/manufacturers"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"update-manufacturer",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Update Manufacturer"}),Object(H.jsx)("p",{className:"lead text-center",children:"Modify a manufacturer (for the whole account/company)"}),Object(H.jsx)("br",{}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"username",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:this.state.name,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"manufacturer name"}),e.username&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.username})]})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Update Manufacturer"})]})]})})})})}}]),a}(c.Component),Ae=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var c;return Object(Y.a)(this,a),(c=t.call(this)).state={errors:{}},c.deleteChemical=e.deleteChemical,c}return Object(Z.a)(a,[{key:"render",value:function(){var e=this,t=this.props.chemical;return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"card card-body bg-light mb-3",style:{padding:"10px"},children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-2",children:Object(H.jsx)("span",{className:"mx-auto",children:t.shortName})}),Object(H.jsxs)("div",{className:"col-sm-7",children:[Object(H.jsx)("h4",{children:t.exactName}),this.drawCategory(t)]}),Object(H.jsx)("div",{className:"col-sm-3",children:this.props.isAdmin&&Object(H.jsx)(xe,{updateFormTo:"update-chemical/".concat(t.id),onDelete:function(){return e.deleteChemical(t)}})})]})})})}},{key:"drawCategory",value:function(e){return e.category?Object(H.jsx)("i",{children:e.category.name}):Object(H.jsx)("i",{children:"n.a"})}}]),a}(c.Component),De=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={chemicals:[],errors:{deleted:{},chemicalsErrorStatus:""}},e.deleteChemical=e.deleteChemical.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"deleteChemical",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,!window.confirm("Are you sure you want to delete '".concat(t.shortName,"' (").concat(t.exactName,")?"))){e.next=12;break}return e.prev=2,e.next=5,b.a.delete("/api/lab-admin/chemical/".concat(a));case 5:c=this.state.chemicals.filter((function(e){return e.id!==a})),this.setState({chemicals:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errors:{deleted:Object(ne.a)({},"id"+a,e.t0.response.data)}});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(),t=this.props.selectedLab,this.loadChemicals(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.selectedLab,console.log("in componentWillReceiveProps "+JSON.stringify(a)),this.loadChemicals(a);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadChemicals",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.key){e.next=11;break}return e.prev=1,e.next=4,b.a.get("/api/logged-in/chemical/".concat(t.value)).then((function(e){return a.setState({chemicals:e.data})}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("error in get chemicals: "+e.t0),this.setState({errors:Object(y.a)(Object(y.a)({},this.state.errors),{},{chemicalsErrorStatus:e.t0.response.status})});case 10:console.log("in componentWillReceiveProps "+JSON.stringify(t));case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.selectedLab.key&&(this.props.user.labsAsAdmin.includes(this.props.selectedLab.value)||this.props.selectedLab.labManagers.map((function(e){return e.username})).includes(this.props.user.username));return Object(H.jsx)("div",{className:"chemicals",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Chemicals"}),Object(H.jsx)("p",{className:"lead text-center",children:"With the help of this pre-defined list of chemicals, you can easily register the concrete chemical items into your lab."}),Object(H.jsx)("br",{}),e&&Object(H.jsx)(Oe,{formRoute:"/add-chemical",buttonLabel:"Add Chemical"}),Object(H.jsx)("br",{}),Object(H.jsx)("hr",{}),this.props.selectedLab.key?this.getCards(e):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"Please select a lab"})})]})})})})}},{key:"getCards",value:function(e){var t=this;return this.state.chemicals.map((function(a){return Object(H.jsx)(Ae,{lab:t.props.selectedLab,isAdmin:e,chemical:a,deleteChemical:t.deleteChemical,errors:t.state.errors.deleted["id"+a.id]?t.state.errors.deleted["id"+a.id]:{}},a.id)}))}}]),a}(c.Component),Fe=Object(l.b)((function(e){return{selectedLab:e.selectedLab,user:e.security.user}}))(De),Ee=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={categories:[],shortName:"",exactName:"",categoryId:0,errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedLab;this.handleChange(t)}},{key:"componentDidMount",value:function(){var e=this.props.selectedLab;this.handleChange(e)}},{key:"handleChange",value:function(e){P(),A(e,this.props.user)?this.loadCategories(e):this.props.history.push("/chemicals")}},{key:"loadCategories",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.key){e.next=10;break}return e.prev=1,e.next=4,b.a.get("/api/logged-in/chem-category/".concat(t.value)).then((function(e){return a.setState({categories:e.data})}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("error in get chem-categories: "+e.t0),this.setState({errors:Object(y.a)(Object(y.a)({},this.state.errors),{},{categoriesErrorStatus:e.t0.response.status})});case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={labKey:this.props.selectedLab.key,shortName:this.state.shortName,exactName:this.state.exactName,categoryId:this.state.categoryId},e.prev=3,e.next=6,b.a.post("/api/lab-admin/chemical",a);case 6:this.props.history.push("/chemicals"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.errors;return Object(H.jsx)("div",{className:"add-chemical",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Add Chemical"}),Object(H.jsx)("p",{className:"lead text-center",children:"Create a chemical (for the whole account/company)"}),Object(H.jsx)("br",{}),t.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:t.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"shortName",className:"col-sm-4 col-form-label",children:"short name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"shortName",value:this.state.shortName,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":t.shortName}),placeholder:"short name"}),t.shortName&&Object(H.jsx)("div",{className:"invalid-feedback",children:t.shortName})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"exactName",className:"col-sm-4 col-form-label",children:"exact name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"exactName",value:this.state.exactName,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":t.exactName}),placeholder:"exact name"}),t.exactName&&Object(H.jsx)("div",{className:"invalid-feedback",children:t.exactName})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"category",className:"col-sm-4 col-form-label",children:"category"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)(X.a,{options:this.state.categories,labelField:"name",valueField:"id",placeholder:"category",searchable:"true",searchBy:"name",clearable:"true",style:{height:"42px",fontSize:"16px"},onChange:function(t){return e.setState({categoryId:t[0].id})}}),t.chemType&&Object(H.jsx)("div",{className:"invalid-feedback",children:t.chemType})]})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Add Chemical"})]})]})})})})}}]),a}(c.Component),Pe=Object(l.b)((function(e){return{selectedLab:e.selectedLab,user:e.security.user}}))(Ee),Ue=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={categories:[],shortName:"",exactName:"",categoryId:0,errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"componentWillReceiveProps",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.selectedLab,this.handleChange(a);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=this.props.selectedLab;this.handleChange(t),b.a.get("/api/lab-admin/chemical/".concat(this.props.match.params.id)).then((function(t){return e.setState({shortName:t.data.shortName,exactName:t.data.exactName,categoryId:t.data.category.id})}))}},{key:"handleChange",value:function(e){P(),A(e,this.props.user)?this.loadCategories(e):this.props.history.push("/chemicals")}},{key:"loadCategories",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.key){e.next=10;break}return e.prev=1,e.next=4,b.a.get("/api/logged-in/chem-category/".concat(t.value)).then((function(e){return a.setState({categories:e.data})}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("error in get chem-categories: "+e.t0),this.setState({errors:Object(y.a)(Object(y.a)({},this.state.errors),{},{categoriesErrorStatus:e.t0.response.status})});case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={labKey:this.props.selectedLab.key,shortName:this.state.shortName,exactName:this.state.exactName,categoryId:this.state.categoryId},e.prev=3,e.next=6,b.a.put("/api/lab-admin/chemical/".concat(this.props.match.params.id),a);case 6:this.props.history.push("/chemicals"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.errors;return Object(H.jsx)("div",{className:"container",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Update Chemical"}),Object(H.jsx)("br",{}),t.message&&Object(H.jsx)("h5",{className:"invalid-input",children:t.message}),t.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:t.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"shortName",className:"col-sm-4 col-form-label",children:"short name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"shortName",value:this.state.shortName,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":t.shortName}),placeholder:"short name"}),t.shortName&&Object(H.jsx)("div",{className:"invalid-feedback",children:t.shortName})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"exactName",className:"col-sm-4 col-form-label",children:"exact name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"exactName",value:this.state.exactName,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":t.exactName}),placeholder:"exact name"}),t.exactName&&Object(H.jsx)("div",{className:"invalid-feedback",children:t.exactName})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"exactName",className:"col-sm-4 col-form-label",children:"category"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)(X.a,{options:this.state.categories,labelField:"name",values:this.state.categories.filter((function(t){return t.id===e.state.categoryId})),valueField:"id",placeholder:"category",searchable:"true",searchBy:"name",clearable:"true",style:{height:"42px",fontSize:"16px"},onChange:function(t){return e.setState({categoryId:t[0].id})}}),t.chemType&&Object(H.jsx)("div",{className:"invalid-feedback",children:t.chemType})]})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Update Chemical"})]})]})})}}]),a}(c.Component),Re=Object(l.b)((function(e){return{selectedLab:e.selectedLab,user:e.security.user}}))(Ue),Te=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var c;return Object(Y.a)(this,a),(c=t.call(this)).state={errors:{}},c.deleteLab=e.deleteLab,c}return Object(Z.a)(a,[{key:"render",value:function(){var e=this,t=this.props.lab;return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"card card-body bg-light mb-3",style:{padding:"10px"},children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-2",children:Object(H.jsx)("span",{className:"mx-auto",children:t.key})}),Object(H.jsxs)("div",{className:"col-sm-7",children:[Object(H.jsx)("h4",{children:t.name}),Object(H.jsxs)("i",{children:["(",t.labManagers.map((function(e){return e.fullName})).join(","),")"]})]}),Object(H.jsx)("div",{className:"col-sm-3",children:this.props.isAccountManager&&Object(H.jsx)(xe,{updateFormTo:"update-lab/".concat(t.id),onDelete:function(){return e.deleteLab(t)}})})]})})})}}]),a}(c.Component),Be=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={labs:[],errors:{deleted:{}}},e.deleteLab=e.deleteLab.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"deleteLab",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,!window.confirm("Are you sure you want to delete '".concat(t.name,"' (").concat(t.key,")?"))){e.next=12;break}return e.prev=2,e.next=5,b.a.delete("/api/account/lab/".concat(a));case 5:c=this.state.labs.filter((function(e){return e.id!==a})),this.setState({labs:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errors:{deleted:Object(ne.a)({},"id"+a,e.t0.response.data)}});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;R(),b.a.get("/api/logged-in/lab").then((function(t){return e.setState({labs:t.data})}))}},{key:"render",value:function(){var e=this,t=F(this.props.user);return Object(H.jsx)("div",{className:"labs",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Labs"}),Object(H.jsx)("p",{className:"lead text-center",children:"Laboratories of the company"}),Object(H.jsx)("br",{}),t&&Object(H.jsx)(Oe,{formRoute:"/add-lab",buttonLabel:"Add Lab"}),Object(H.jsx)("br",{}),Object(H.jsx)("hr",{}),this.state.labs.map((function(a){return Object(H.jsx)(Te,{isAccountManager:t,lab:a,deleteLab:e.deleteLab,errors:e.state.errors.deleted["id"+a.id]?e.state.errors.deleted["id"+a.id]:{}},a.id)}))]})})})})}}]),a}(c.Component),ze=Object(l.b)((function(e){return{user:e.security.user}}))(Be),_e=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={key:"",name:"",labManagerUsernames:[],users:[],errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e.managersOfLabMultiselect=n.a.createRef(),e}return Object(Z.a)(a,[{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=this;P(),F(this.props.user)?b.a.get("/api/account/user").then((function(t){return e.setState({users:t.data})})).catch((function(t){return e.props.history.push("/labs")})):this.props.history.push("/labs")}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={key:this.state.key,name:this.state.name,labManagerUsernames:this.managersOfLabMultiselect.current.getSelectedItems().map((function(e){return e.username}))},e.prev=3,e.next=6,b.a.post("/api/account/lab",a);case 6:this.props.history.push("/labs"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"add-lab",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Add Lab"}),Object(H.jsx)("p",{className:"lead text-center",children:"Create a lab"}),Object(H.jsx)("br",{}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"key",className:"col-sm-4 col-form-label",children:"key"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"key",value:this.state.key,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.key}),placeholder:"key (eg: compound-lab)"}),e.key&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.key})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"name",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:this.state.name,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"name"}),e.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.name})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"managers",className:"col-sm-4 col-form-label",children:"Managers of lab"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"fullName",placeholder:"managers of lab",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"20px"}},options:this.state.users,ref:this.managersOfLabMultiselect,showCheckbox:!0})})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Add Lab"})]})]})})})})}}]),a}(c.Component),qe=Object(l.b)((function(e){return{user:e.security.user}}))(_e),He=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={key:"",name:"",labManagerUsernames:[],users:[],persistedLab:{id:-1,key:"",name:"",labManagers:[]},errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e.managersOfLabMultiselect=n.a.createRef(),e}return Object(Z.a)(a,[{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=this;if(P(),F(this.props.user)){var t=this.props.match.params.id;b.a.get("/api/account/user").then((function(t){return e.setState({users:t.data})})),b.a.get("/api/account/lab/".concat(t)).then((function(t){return e.setState({persistedLab:t.data,key:t.data.key,name:t.data.name})}))}else this.props.history.push("/labs")}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={key:this.state.key,name:this.state.name,labManagerUsernames:this.managersOfLabMultiselect.current.getSelectedItems().map((function(e){return e.username}))},e.prev=3,e.next=6,b.a.put("/api/account/lab/".concat(this.props.match.params.id),a);case 6:this.props.history.push("/labs"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"add-lab",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Update Lab"}),Object(H.jsx)("p",{className:"lead text-center",children:"Modify the lab"}),Object(H.jsx)("br",{}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"key",className:"col-sm-4 col-form-label",children:"key"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"key",value:this.state.key,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.key}),placeholder:"key (eg: compound-lab)"}),e.key&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.key})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"name",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:this.state.name,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"name"}),e.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.name})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"managers",className:"col-sm-4 col-form-label",children:"Managers of lab"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(ie.a,{displayValue:"fullName",placeholder:"managers of lab",onSearch:function(){},closeOnSelect:!1,style:{searchBox:{fontSize:"20px"}},options:this.state.users,selectedValues:this.state.persistedLab.labManagers,ref:this.managersOfLabMultiselect,showCheckbox:!0})})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Update Lab"})]})]})})})})}}]),a}(c.Component),Ke=Object(l.b)((function(e){return{user:e.security.user}}))(He),We=function(e){var t=Ve(e.shelfLife);return"".concat(Math.round(t)," days")},Ve=function(e){return e.split("H")[0].substring(2)/24},Je=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var c;return Object(Y.a)(this,a),(c=t.call(this)).state={errors:{}},c.deleteCategory=e.deleteCategory,c}return Object(Z.a)(a,[{key:"render",value:function(){var e=this,t=this.props.category;return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"card card-body bg-light mb-3",style:{padding:"10px"},children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-sm-4",children:Object(H.jsx)("h4",{children:t.name})}),Object(H.jsx)("div",{className:"col-sm-5",children:Object(H.jsx)("span",{children:We(t)})}),Object(H.jsx)("div",{className:"col-sm-3",children:this.props.isAdmin&&Object(H.jsx)(xe,{updateFormTo:"/update-category/".concat(t.id),onDelete:function(){return e.deleteCategory(t)}})})]})})})}}]),a}(c.Component),Xe=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={categories:[],errors:{deleted:{},categoriesErrorStatus:""}},e.deleteCategory=e.deleteCategory.bind(Object(se.a)(e)),e}return Object(Z.a)(a,[{key:"deleteCategory",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,!window.confirm("Are you sure you want to delete ".concat(t.name,"?"))){e.next=12;break}return e.prev=2,e.next=5,b.a.delete("/api/lab-admin/chem-category/".concat(a));case 5:c=this.state.categories.filter((function(e){return e.id!==a})),this.setState({categories:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errors:Object(y.a)(Object(y.a)({},this.state.errors),{},{deleted:Object(ne.a)({},"id"+a,e.t0.response.data)})});case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(),t=this.props.selectedLab,this.loadCategories(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.selectedLab,this.loadCategories(a);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadCategories",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||"{}"===JSON.stringify(t)){e.next=12;break}return e.prev=1,e.next=4,b.a.get("/api/logged-in/chem-category/".concat(t.value)).then((function(e){return a.setState({categories:e.data})}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("error in get chem-categories: "+e.t0),this.setState({errors:Object(y.a)(Object(y.a)({},this.state.errors),{},{categoriesErrorStatus:e.t0.response.status})});case 10:console.log("in componentWillReceiveProps "+JSON.stringify(t)),this.setState({selectedLab:t});case 12:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.selectedLab.key&&(this.props.user.labsAsAdmin.includes(this.props.selectedLab.value)||this.props.selectedLab.labManagers.map((function(e){return e.username})).includes(this.props.user.username));return Object(H.jsx)("div",{className:"categories",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Chemical Categories"}),Object(H.jsx)("p",{className:"lead text-center",children:"With the help of these categories, shelf lifes of the chemicals can be calculated, after opened"}),Object(H.jsx)("br",{}),e&&Object(H.jsx)(Oe,{formRoute:"/add-category",buttonLabel:"Add Category"}),Object(H.jsx)("br",{}),Object(H.jsx)("hr",{}),this.props.selectedLab.key?this.getCards(e):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"Please select a lab"})})]})})})})}},{key:"getCards",value:function(e){var t=this;return this.state.categories.map((function(a){return Object(H.jsx)(Je,{lab:t.props.selectedLab,isAdmin:e,category:a,deleteCategory:t.deleteCategory,errors:t.state.errors.deleted["id"+a.id]?t.state.errors.deleted["id"+a.id]:{}},a.id)}))}}]),a}(c.Component),Ge=Object(l.b)((function(e){return{selectedLab:e.selectedLab,user:e.security.user}}))(Xe),Qe=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={name:"",amount:0,unit:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e.unitOnChanged=e.unitOnChanged.bind(Object(se.a)(e)),e.unitOptions=[{value:"d",label:"day"},{value:"m",label:"month"},{value:"y",label:"year"}],e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.selectedLab;this.handleChange(t)}},{key:"componentDidMount",value:function(){var e=this.props.selectedLab;this.handleChange(e)}},{key:"handleChange",value:function(e){P(),A(e,this.props.user)||this.props.history.push("/categories")}},{key:"unitOnChanged",value:function(e){this.setState({unit:e[0]})}},{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={labKey:this.props.selectedLab.key,name:this.state.name,amount:this.state.amount,unit:this.state.unit.value},e.prev=2,e.next=5,b.a.post("/api/lab-admin/chem-category",a);case 5:this.props.history.push("/categories"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"add-category",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Add chemical category"}),Object(H.jsx)("p",{className:"lead text-center",children:"Create a chemical category with shelf life for the given lab"}),Object(H.jsx)("br",{}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"name",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:this.state.name,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"chemical category name (e.g. salt)"}),e.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.name})]})]}),Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("label",{htmlFor:"amount",className:"col-sm-4 col-form-label",children:"shelf life"}),Object(H.jsx)("div",{className:"col-sm-4",children:Object(H.jsx)("input",{name:"amount",value:this.state.amount,onChange:this.onChange,type:"number",className:oe()("form-control form-control-lg",{"is-invalid":e.amount}),placeholder:"chemical category name (e.g. salt)"})}),Object(H.jsx)("div",{className:"col-sm-4",children:Object(H.jsx)(X.a,{name:"amount",onChange:this.unitOnChanged,options:this.unitOptions,placeholder:"unit",style:{height:"42px",fontSize:"16px"}})})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Add Category"})]})]})})})})}}]),a}(c.Component),Ye=Object(l.b)((function(e){return{selectedLab:e.selectedLab,user:e.security.user}}))(Qe),Ze=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Y.a)(this,a),(e=t.call(this)).state={name:"",amount:0,unit:"",errors:{}},e.onChange=e.onChange.bind(Object(se.a)(e)),e.onSubmit=e.onSubmit.bind(Object(se.a)(e)),e.unitOnChanged=e.unitOnChanged.bind(Object(se.a)(e)),e.unitOptions=[{value:"d",label:"day"},{value:"m",label:"month"},{value:"y",label:"year"}],e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.selectedLab;this.handleChange(t)}},{key:"componentDidMount",value:function(){var e=this.props.selectedLab;this.handleChange(e)}},{key:"handleChange",value:function(e){var t=this;P(),A(e,this.props.user)?b.a.get("/api/lab-admin/chem-category/".concat(this.props.match.params.id)).then((function(e){return t.setState({name:e.data.name,amount:Ve(e.data.shelfLife),unit:"d"})})):this.props.history.push("/categories")}},{key:"onChange",value:function(e){this.setState(Object(ne.a)({},e.target.name,e.target.value))}},{key:"unitOnChanged",value:function(e){this.setState({unit:e[0].value})}},{key:"onSubmit",value:function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={labKey:this.props.selectedLab.key,name:this.state.name,amount:this.state.amount,unit:this.state.unit},e.prev=3,e.next=6,b.a.put("/api/lab-admin/chem-category/".concat(this.props.match.params.id),a);case 6:this.props.history.push("/categories"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errors:e.t0.response.data});case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.errors;return Object(H.jsx)("div",{className:"update-chem-category",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Update chemical category"}),Object(H.jsx)("p",{className:"lead text-center",children:"Modify the category of the chemical"}),Object(H.jsx)("br",{}),e.message&&Object(H.jsx)("h5",{className:"invalid-input",children:e.message}),e.message&&Object(H.jsx)("div",{className:"form-group row mb-3 invalid-feedback",children:e.message}),Object(H.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"name",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:this.state.name,onChange:this.onChange,type:"text",className:oe()("form-control form-control-lg",{"is-invalid":e.name}),placeholder:"name"}),e.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.name})]})]}),Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("label",{htmlFor:"amount",className:"col-sm-4 col-form-label",children:"shelf life"}),Object(H.jsxs)("div",{className:"col-sm-4",children:[Object(H.jsx)("input",{name:"amount",value:this.state.amount,onChange:this.onChange,type:"number",className:oe()("form-control form-control-lg",{"is-invalid":e.amount}),placeholder:"chemical category name (e.g. salt)"}),e.amount&&Object(H.jsx)("div",{className:"invalid-feedback",children:e.amount})]}),Object(H.jsx)("div",{className:"col-sm-4",children:Object(H.jsx)(X.a,{name:"amount",values:[{value:"d",label:"day"}],onChange:this.unitOnChanged,options:this.unitOptions,placeholder:"unit",style:{height:"42px",fontSize:"16px"}})})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Update Category"})]})]})})})})}}]),a}(c.Component),$e=Object(l.b)((function(e){return{selectedLab:e.selectedLab,user:e.security.user}}))(Ze),et=a(24),tt="LEFT",at="RIGHT",ct=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=e,n=[];c<=t;)n.push(c),c+=a;return n},nt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var c;return Object(Y.a)(this,a),(c=t.call(this,e)).fetchPageNumbers=function(){var e="number"===typeof c.props.pageNeighbours?Math.max(0,Math.min(c.props.pageNeighbours,2)):0,t="number"===typeof c.props.pageLimit?c.props.pageLimit:30,a=Math.ceil(c.props.totalRecords/t),n=c.state.currentPage,s=2*e+3;if(a>s+2){var r=Math.max(2,n-e),i=Math.min(a-1,n+e),l=ct(r,i),o=r>2,d=a-i>1,u=s-(l.length+1);switch(!0){case o&&!d:var m=ct(r-u,r-1);l=[tt].concat(Object(et.a)(m),Object(et.a)(l));break;case!o&&d:var b=ct(i+1,i+u);l=[].concat(Object(et.a)(l),Object(et.a)(b),[at]);break;default:l=[tt].concat(Object(et.a)(l),[at])}return[1].concat(Object(et.a)(l),[a])}return ct(1,a)},c.gotoPage=function(e){var t="number"===typeof c.props.pageLimit?c.props.pageLimit:30,a=Math.ceil(c.props.totalRecords/t),n=c.props.onPageChanged,s=void 0===n?function(e){return e}:n,r=Math.max(0,Math.min(e,a)),i={currentPage:r,totalPages:a,pageLimit:t,totalRecords:c.props.totalRecords};c.setState({currentPage:r},(function(){return s(i)}))},c.handleClick=function(e){return function(t){c.gotoPage(e)}},c.handleMoveLeft=function(e){var t="number"===typeof c.props.pageNeighbours?Math.max(0,Math.min(c.props.pageNeighbours,2)):0;c.gotoPage(c.state.currentPage-2*t-1)},c.handleMoveRight=function(e){var t="number"===typeof c.props.pageNeighbours?Math.max(0,Math.min(c.props.pageNeighbours,2)):0;c.gotoPage(c.state.currentPage+2*t+1)},c.state={currentPage:1},c}return Object(Z.a)(a,[{key:"render",value:function(){var e=this,t="number"===typeof this.props.pageLimit?this.props.pageLimit:30,a=Math.ceil(this.props.totalRecords/t),n=this.state.currentPage;if(!this.props.totalRecords||1===a)return null;var s=this.fetchPageNumbers();return Object(H.jsx)(c.Fragment,{children:Object(H.jsx)("nav",{"aria-label":"Countries Pagination",children:Object(H.jsx)("ul",{className:"pagination",children:s.map((function(t,a){return t===tt?Object(H.jsx)("li",{className:"page-item",children:Object(H.jsxs)("button",{className:"page-link","aria-label":"Previous",onClick:e.handleMoveLeft,children:[Object(H.jsx)("span",{"aria-hidden":"true",children:"\xab"}),Object(H.jsx)("span",{className:"sr-only",children:"Previous"})]})},a):t===at?Object(H.jsx)("li",{className:"page-item",children:Object(H.jsxs)("button",{className:"page-link","aria-label":"Next",onClick:e.handleMoveRight,children:[Object(H.jsx)("span",{"aria-hidden":"true",children:"\xbb"}),Object(H.jsx)("span",{className:"sr-only",children:"Next"})]})},a):Object(H.jsx)("li",{className:"page-item".concat(n===t?" active":""),children:Object(H.jsx)("button",{className:"page-link",onClick:e.handleClick(t),children:t})},a)}))})})})}},{key:"componentDidMount",value:function(){this.gotoPage(1)}}]),a}(c.Component),st=function(e){return!e.consumptionDate&&!rt(e)},rt=function(e){var t=new Date(e.expirationDate),a=new Date(e.expirationDateBeforeOpened),c=(new Date).setHours(0,0,0,0);return a<c||e.expirationDate&&t<c},it=a(95),lt=a.n(it),ot=function(e){return Object(H.jsx)("div",{onClick:e.onClick,className:lt.a.backdrop})},dt=function(e){return Object(H.jsx)("div",{className:lt.a.modal,children:Object(H.jsx)("div",{className:lt.a.content,children:e.children})})},ut=document.getElementById("overlays"),mt=function(e){return Object(H.jsxs)(c.Fragment,{children:[Object(s.createPortal)(Object(H.jsx)(ot,{onClick:e.onClick}),ut),Object(s.createPortal)(Object(H.jsx)(dt,{children:e.children}),ut)]})},bt=(a(197),function(e){return console.log("Inside VerifyPanel"),Object(H.jsxs)(mt,{onClick:e.onCancel,children:[Object(H.jsx)("div",{className:"message",children:e.veryfyMessage}),Object(H.jsxs)("div",{className:"button-container",children:[Object(H.jsx)(fe.a,{style:{marginRight:"10px"},variant:"contained",onClick:e.onCancel,children:e.onSubmit?"Cancel":e.buttonLabel}),e.onSubmit&&Object(H.jsx)(fe.a,{variant:"contained",onClick:e.onSubmit,children:e.buttonLabel})]})]})}),ht=(a(198),a(68)),jt=function(e){var t=e.chemItem,a=e.setActiveModal,c=e.getToggleProps,n=t.chemical;return Object(H.jsxs)("div",Object(y.a)(Object(y.a)({className:"row"},c()),{},{children:[Object(H.jsx)("div",{className:"col-2",children:Object(H.jsx)("h4",{className:"mx-auto",children:n.shortName})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsxs)("i",{children:[t.quantity," ",t.unit]})}),Object(H.jsx)("div",{className:"col-1",children:Object(H.jsx)("span",{className:"mx-auto",children:t.arrivalDate})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)("p",{children:t.manufacturer.name})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsxs)("p",{children:[t.batchNumber,"/",t.seqNumber]})}),Object(H.jsx)("div",{className:"col-sm-1",children:function(e){return e.expirationDate?Object(H.jsx)("strong",{children:e.expirationDate}):Object(H.jsx)("p",{children:e.expirationDateBeforeOpened})}(t)}),Object(H.jsx)("div",{className:"col-sm-1",children:function(e){return e.openingDate?Object(H.jsx)("div",{children:e.openingDate}):rt(e)?Object(H.jsx)("div",{}):Object(H.jsxs)(fe.a,{onClick:function(){return a("OPEN")},className:"btn action-button",variant:"outlined",size:"medium",children:[Object(H.jsx)("i",{className:"fas fa-external-link-square-alt",children:"Open"}),Object(H.jsx)("i",{class:""})]})}(t)}),Object(H.jsx)("div",{className:"col-sm-2",children:function(e){return e.openingDate||rt(e)?e.openingDate&&!e.consumptionDate?Object(H.jsx)(fe.a,{className:"btn action-button",color:"warning",variant:"outlined",size:"medium",onClick:function(){return a("CONSUME")},children:Object(H.jsx)("i",{className:"fas fa-check-double",children:"Consume"})}):Object(H.jsx)("div",{children:e.consumptionDate}):Object(H.jsx)("div",{})}(t)})]}))},pt=function(e){var t=e.chemItem,a=e.getCollapseProps,c=t.chemical;return Object(H.jsx)("div",Object(y.a)(Object(y.a)({},a()),{},{children:Object(H.jsxs)("div",{className:"row content",style:{padding:"10px"},children:[Object(H.jsx)("div",{className:"col-2",children:Object(H.jsx)("i",{className:"mx-auto",children:c.exactName})}),Object(H.jsx)("div",{className:"col-sm-1"}),Object(H.jsx)("div",{className:"col-1",children:Object(H.jsxs)("i",{className:"mx-auto",children:["by ",t.arrivedBy.fullName]})}),Object(H.jsx)("div",{className:"col-sm-4"}),Object(H.jsx)("div",{className:"col-sm-1"}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("i",{className:"mx-auto",children:t.openedBy&&"by ".concat(t.openedBy.fullName)})}),Object(H.jsx)("div",{className:"col-sm-1"}),Object(H.jsx)("div",{className:"col-sm-1"})]})}))},Ot=function(e){var t=e.chemItem,a=e.getCollapseProps,c=e.setActiveModal;t.chemical;return Object(H.jsx)("div",Object(y.a)(Object(y.a)({},a()),{},{children:Object(H.jsxs)("div",{className:"row content",style:{padding:"10px"},children:[Object(H.jsx)("div",{className:"col-10"}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)(xe,{updateFormTo:"/update-chem-item/".concat(t.id),onDelete:function(){return c("DELETE")}})})]})}))},ft=function(e){var t=Object(c.useState)(e.chemItem),a=Object(V.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(V.a)(r,2),l=i[0],o=i[1],d=Object(ht.a)(),u=d.getCollapseProps,m=d.getToggleProps,h=function(e){return Object(H.jsxs)("div",{children:[Object(H.jsxs)("p",{children:["Are you sure you want to ".concat(e," "),Object(H.jsx)("b",{children:n.chemical.shortName})]}),Object(H.jsxs)("p",{children:["(",Object(H.jsx)("b",{children:n.manufacturer.name}),", ",Object(H.jsx)("b",{children:"".concat(n.batchNumber,"/").concat(n.seqNumber)}),")"]})]})};n.chemical;return Object(H.jsxs)("div",{className:"container",children:[Object(H.jsxs)("div",{className:"card card-body bg-light mb-2 chem-item ".concat(st(n)?"":"unavailable"),children:[Object(H.jsx)(jt,{chemItem:n,setActiveModal:o,isManager:e.isManager,getToggleProps:m}),Object(H.jsx)(pt,{chemItem:n,getCollapseProps:u}),e.isManager&&Object(H.jsx)(Ot,{chemItem:n,setActiveModal:o,getCollapseProps:u})]}),"CONSUME"===l&&Object(H.jsx)(bt,{onCancel:function(){return o("")},veryfyMessage:h("consume"),onSubmit:function(){b.a.patch("/api/chem-item/consume/".concat(n.id)).then((function(e){return s(e.data)})),o("")},buttonLabel:"Consume"}),"OPEN"===l&&Object(H.jsx)(bt,{onCancel:function(){return o("")},veryfyMessage:h("open"),onSubmit:function(){b.a.patch("/api/chem-item/open/".concat(n.id)).then((function(e){return s(e.data)})),o("")},buttonLabel:"Open"}),"DELETE"===l&&Object(H.jsx)(bt,{onCancel:function(){return o("")},veryfyMessage:h("delete"),onSubmit:function(){e.deleteChemItem(n.id),o("")},buttonLabel:"Delete"})]})};function xt(){return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"bg-white mb-2",style:{padding:"2px"},children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-2",children:Object(H.jsx)("h4",{className:"mx-auto",children:"chemical"})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"quantity"})}),Object(H.jsx)("div",{className:"col-1",children:Object(H.jsx)("h4",{className:"mx-auto",children:"arrival"})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)("h4",{children:"manufacturer"})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)("h4",{children:"batch nr / seq nr"})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"exp date"})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"open/ed"})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"consume/d"})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"admin"})})]})})})}a(200);var vt=function(){var e=Object(c.useState)(!0),t=Object(V.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)([]),r=Object(V.a)(s,2),i=r[0],o=r[1],m=Object(c.useState)([]),h=Object(V.a)(m,2),j=h[0],p=h[1],O=Object(c.useState)(""),f=Object(V.a)(O,2),x=f[0],v=f[1],g=Object(c.useState)(1),y=Object(V.a)(g,2),N=y[0],w=y[1],k=Object(c.useState)(1),S=Object(V.a)(k,2),C=S[0],L=S[1],M=Object(c.useState)(0)[1],I=Object(c.useState)(""),A=Object(V.a)(I,2),D=A[0],F=A[1],E=function(){n(!a)},U=Object(l.c)((function(e){return e.selectedLab})),R=Object(l.c)((function(e){return e.security.user}));Object(c.useEffect)((function(){U&&b.a.get("/api/logged-in/chemical/".concat(U.key)).then((function(e){return p(e.data)}))}),[U]),Object(c.useEffect)((function(){P(),B({currentPage:N,pageLimit:20,onlyAvailable:a})}),[U,a,x]);var T=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.delete("/api/chem-item/".concat(t));case 3:o((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),F(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){P();var t=e.currentPage,c=e.pageLimit;if(U&&U.key&&t){var n=a?"&expired=false&consumed=false":"",s=x?"&chemicalId=".concat(x.id):"";b.a.get("/api/chem-item/".concat(U.key,"?page=").concat(t-1,"&size=").concat(c).concat(n).concat(s)).then((function(e){w(t),o(e.data.content),L(e.data.totalItems),M(e.data.totalPages)}))}},z=function(e){e[0]?v(e[0]):v("")},_=U.key&&U.labManagers.filter((function(e){return e.username===R.username})).length>0,q=U.key&&(R.labsAsAdmin.includes(U.value)||_);return Object(H.jsx)("div",{className:"projects",children:Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h3",{className:"display-4 text-center",children:"Registered Chemicals"}),q&&Object(H.jsx)(Oe,{formRoute:"/add-chem-item",buttonLabel:"Register Chemical"}),Object(H.jsx)("hr",{}),U.key?function(e){return e?Object(H.jsx)("div",{className:"container mb-5",children:Object(H.jsxs)("div",{className:"row d-flex flex-row py-0",children:[Object(H.jsxs)("div",{className:"w-100 px-4 py-0 d-flex flex-row flex-wrap align-items-center justify-content-between",children:[Object(H.jsxs)("div",{className:"col-sm-4 d-flex flex-row py-2 align-items-center",children:[Object(H.jsx)(nt,{totalRecords:e,pageLimit:20,pageNeighbours:1,onPageChanged:B}),Object(H.jsxs)("div",{className:"pad-chckbx",children:[Object(H.jsx)("input",{type:"checkbox",checked:a,onChange:E}),Object(H.jsx)("label",{className:"pad-5",children:"Only available"})]})]}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:j,values:x?[x]:[],labelField:"shortName",valueField:"shortName",placeholder:"chemical",searchable:!0,clearable:!0,style:{height:"42px",fontSize:"16px"},onChange:z})})]}),Object(H.jsx)(xt,{}),Object(H.jsx)("hr",{}),i.map((function(e){return Object(H.jsx)(ft,{isManager:_,chemItem:e,deleteChemItem:T},e.id)}))]})}):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"There is no registered chemical for this lab so far"})})}(C):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"Please select a lab"})}),D&&Object(H.jsx)(bt,{onCancel:function(){return F("")},veryfyMessage:D,buttonLabel:"Ok"})]})})})})},gt=(a(201),function(){return Object(H.jsxs)("div",{className:"body",children:[Object(H.jsx)("h1",{children:"chemstore User Manual"}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsx)("h2",{children:"Purpose"}),Object(H.jsx)("p",{children:"The purpose of this web application is to ease the burden of the registration and administration of chemicals and mixtures made from them. While it provides a straightforward interface, it complies the highest industrial quality assurance standards. It implements fine grained authorization, detailed audit logging (in progress) and every operation is highly controlled."}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsx)("h2",{children:"Demo"}),Object(H.jsx)("br",{}),Object(H.jsx)("p",{children:"The purpose of the demo instance is to give anyone a chance to try the features of the application. The data in the demo app is 100 % made up, the loss of it makes no harm to anyone, it is backed up (saved). The data have been set up a way, that covers many use cases, in the point of view of the application. Thus, it is recommended to take a look, before starting any modification in the system (update, delete etc.). Modifications are crucial part of the application. Each and every modification feature is available in the demo application, to get to know the behaviour of it perfectly. However, these modifications change the initial data, so the bigger the changes, the bigger the difference from the initial demo data. That's why it is encouraged to create new entities (chemicals, labs, users, etc), test the features of the app with them, and make modifications on them. However, the initial demo data is backed up, and periodically being restored. So no worry to mess up something. The only strong request is that please don't corrupt/delete/ruin the data on purpose! It will only makes the next person annoyed, who wants to try the app."}),Object(H.jsxs)("p",{children:["Keep it in mind, that the data in the demo app is restored in some time (means the previous data is lost forever), so ",Object(H.jsx)("b",{children:"IT CAN NOT BE USED IN PRODUCTION"}),". The operator of the chemstore demo application doesn't bear any responsibility for the data in the application (provided by user or the initial data) and doesn't bear any responsibility for the availability of the demo application."]}),Object(H.jsx)("h3",{children:"Demo Credentials"}),Object(H.jsxs)("p",{children:["In the demo app, each username ends with ",Object(H.jsx)("code",{children:"@account.com"}),". The default password is the the username before the ",Object(H.jsx)("code",{children:"@"})," symbol. For example you can login as 'Strong Admin' with the following credentials: username:'strongadmin@account.com', password:'strongadmin'"]}),"Or with 'Alpha Lab User' with 'alabuser@account.com' and 'alabuser'. There are many users in the system. You can check them under 'Users' point. The username is in the first column. With one exception, each password is the default password (username before @ symbol). You can choose between many users, who are assinged to different labs, with different roles. For the different users, different featues are available depends on which role do they have and for which labs.",Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsx)("h2",{children:"Roles"}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"User"}),Object(H.jsx)("br",{}),Object(H.jsx)("p",{children:"A User is typically a technician, whose daily work is to use the chemicals and make mixtures (e.g. eluents) out of it, without additional admin role."}),Object(H.jsx)("p",{children:"A User can see the every laboratory and User in the system (account), but he/she cannot modify these."}),Object(H.jsx)("p",{children:"A User can be assigned to one or more laboratories (labs) by the Account Manager (see below). He/she can open and consume chemicals (chem items) in these labs. A User can see the chemicals and the chemical categories in each assigned lab, but cannot modify these."}),Object(H.jsx)("p",{children:"A User can choose from the dropdown list found in the right header, which laboratory he/she would like to act. E.g. in which lab he/she would like to open a certain chemical."}),Object(H.jsx)("p",{children:"A User can change his/her password, and can log out."}),Object(H.jsx)("h3",{children:"Lab Admin"}),Object(H.jsx)("br",{}),Object(H.jsx)("p",{children:"The Lab Admin is typically an employee, whose responsibility is to administrate the everyday life of the laboratory in the application. The Lab Admin registers the shipped chemicals, and administrates the related records. A Lab Admin has all the User permissions by default (for the assigned labs), plus some extra detailed below."}),Object(H.jsx)("p",{children:"A Lab Admin can be assigned to one or more laboratories (labs) by the Account Manager. If an employee is assigned to a lab as Lab Admin, it is not required to assign him/her as user to the same lab. Besides opening and consuming chemicals (chem items), he/she can add new chem items to the lab."}),Object(H.jsx)("p",{children:"A Lab Admin can add, modify and delete (archive) chemicals and chemical categories, for the lab he/she administrates."}),Object(H.jsx)("p",{children:"A Lab Admin can add, modify and delete (archive) manufacturers throughout the whole system (account)."}),Object(H.jsx)("h3",{children:"Lab Manager"}),Object(H.jsx)("br",{}),Object(H.jsx)("p",{children:"The Lab Manager is typically the leader or the deputy leader of the laboratory, or the some kind of responsible person (e.g. quality assurer). It is usually the Lab Manager, who is responsible the whole laboratory, especially in the aspect of quality assurance. Only the Lab Manager has the authority to perform quality assurance critical modifications (e.g. deleting a chem item). Of course, these modifications are registered to the unmodifiable audit log (see below)."}),Object(H.jsx)("p",{children:"A Lab Manager can be assigned to one or more laboratories (labs) by the Account Manager. It is advisable to have more lab managers for one laboratory! If an employee is assigned to a lab as Lab Manager, it is not required to assign him/her as a Lab Admin or as a user to the same lab. A Lab Manager has all permissions as the Lab Admin by default, plus some extra detailed below."}),Object(H.jsx)("p",{children:"The Lab Manager can modify (in progress) and delete chem items from the system (hard delete)."}),Object(H.jsx)("p",{children:"The Lab Manager can assign employees to the lab as 'users' or 'lab admins' (in progess)."}),Object(H.jsx)("h3",{children:"Account Manager"}),Object(H.jsx)("br",{}),Object(H.jsx)("p",{children:"The Account Manager is an employee, who is responsible for the application in a high level. He/she registers laboratories, users etc, but he/she is not typically a User or Admin of the lab. For example, Account Manager can be IT system admin, a higher level leader or quality assurer."}),Object(H.jsx)("p",{children:"Account admin can create, modify and delete labs and users. He/she can assign the employees to the labs as users and/or lab admins. He/she can modify the managers of the labs."}),Object(H.jsx)("p",{children:"He/she can restore the password of the users."}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsx)("h2",{children:"Entities"}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"User"}),Object(H.jsx)("p",{children:"User is an employee of the company/account. Users can be added to the system by the Account Manager. The User is created by a default password (the username before the @ symbol). The User must change this password at the first login. He/she can be assigned to different labs accross the system by an Account Manager or a Lab Manager (in progress). Each operation can be performed only after the login. Each quality critical operation is logged in audit log (in progress)."}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"Lab"}),Object(H.jsx)("p",{children:"Lab is a laboratory of the company/account. There can be one or more Lab in the system/account. Labs can be added to the system by an Account Manager. One manager of the lab is mandatory. Only the Account Manager can modify the attributes (name, manager) of the labs. Lab is one of the most important entity in the application, many entity is linked to it (eg chemical, chem item)."}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"Manufacturer"}),Object(H.jsx)("p",{children:"Manufacturers are common throughout the whole company/account. This means a manufacturer that is added for lab1, can be used for lab2."}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"(Chemical) Category"}),Object(H.jsx)("p",{children:"The purpose of (Chemical) Category is to group different chemicals together based on the same shelf life of the chemicals (expiration time, after opening). E.g. ACN and MeOH (chemicals) are both organic solvents (category). We can set an expiration time for organic solvent category (e.g. '90 days after opening'), and it would be applied for each organic solvent chemical (ACN and MeOH). (Chemical) Categories are linked to a specific lab. This means a category that is added for lab1, can't be used for lab2. Of course the very same category can be added for lab2 too, but it must keep it mind that those two are different entites."}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"Chemical"}),Object(H.jsx)("p",{children:"A chemical entity represents a certain type (not a concrete bottle) of chemical."}),Object(H.jsx)("br",{}),Object(H.jsx)("h3",{children:"Chem Item"}),Object(H.jsx)("p",{children:"A chem item represents a concrete packaged (bottle or box of) chemical, that can (or could) be found in the laboratory, with an exact manufacturer, batch number, volume etc. One of the main features of the app is the administration of the status of the chem items through the time."}),Object(H.jsxs)("p",{children:["A chem item is shipped to the lab, and the Lab Admin or the Lab Manager registers it. The registered chem item can only be used after someone opened it. When opened, an expiration date is calculated based on the defined category (if any) AND the manufacturer expiration date. If no category is provided, the expiration date will be the same as the manufacturer expiration date. If category is provided, the expiration date will be the lesser value between the calculated expiration date and the manufacturer expiration date. The calculated expiration date equals the current date (when opened) plus the shelf life given in the related category. When a chem item is consumed, this must be registered in the application too, to prevent the usage of this chemical any longer by mistake.",Object(H.jsx)("b",{children:" Only opened, not consumed and not expired chem items can be used for the creation of mixtures and eluents!"})]}),Object(H.jsx)("p",{children:"The chem items in the lab can be listed under the 'Chem items' tab. Automatically, it will show the 'available' chem items, meaning the ones that are not consumed or expired. If the 'Only available' is unchecked, each chem item is viewable. A registered chem item cannot be modified, because many attributes are automatically calculated (e.g. expiration date or who registered it) (This will change in the future. If a chem item registered with bad data, the Lab Manager can delete the incorrect record, and add a new one with the correct data."}),Object(H.jsx)("p",{children:"Lab manager or Lab Admin can register chem items with the following data (each required):"}),Object(H.jsxs)("ul",{children:[Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"chemical:"})," The type of the chem item (pre registered under 'Chemicals')"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"manufacturer:"})," The manufacturer of the chem item (pre registered under 'Manufacturers')"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"batch number:"})," The batch number (or lot number) of the chem item (free text)"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"quantity:"})," The quantity of packaging, volume or mass (number)"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"unit:"})," The unit of the quantity (one from the fixed list)"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"amount:"})," How many bottles/boxes are to register (number)"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"Expiration date (before opened):"})," The expiration date, given by manufacturer, without opening"]}),Object(H.jsxs)("li",{children:[Object(H.jsx)("b",{children:"Arrival date: "}),"When the chem item is arived/registered in the lab"]})]})]})}),yt=function(e){var t=e.project,a=Object(c.useState)(!1),n=Object(V.a)(a,2),s=n[0],r=n[1];return Object(H.jsxs)("div",{className:"card card-body bg-light mb-3",style:{padding:"10px"},children:[Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-sm-9",children:Object(H.jsx)("h4",{children:t.name})}),Object(H.jsx)("div",{className:"col-sm-3",children:e.isManager&&Object(H.jsx)(xe,{updateFormTo:"/update-project/".concat(t.id),onDelete:function(){return r(!0)}})})]}),s&&Object(H.jsx)(bt,{onCancel:function(){return r(!1)},veryfyMessage:"Are you sure you want to delete project ".concat(t.name,"?"),onSubmit:function(){return e.deleteProject(t.id)},buttonLabel:"Delete"})]})};var Nt=function(){var e=Object(c.useState)([]),t=Object(V.a)(e,2),a=t[0],n=t[1],s=Object(l.c)((function(e){return e.selectedLab})),r=Object(l.c)((function(e){return e.security.user}));Object(c.useEffect)((function(){s&&(P(),b.a.get("/api/logged-in/project/".concat(s.key)).then((function(e){n(e.data)})))}),[s]);var i=s.key&&s.labManagers.filter((function(e){return e.username===r.username})).length>0,o=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("/api/lab-manager/project/".concat(t));case 2:n((function(e){return e.filter((function(e){return e.id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-12",children:[Object(H.jsx)("h3",{className:"display-4 text-center",children:"Projects"}),Object(H.jsxs)("p",{className:"lead text-center",children:["List ",i?" and manage":""," the projects for ",s.name]}),Object(H.jsx)("br",{}),i&&Object(H.jsx)(Oe,{formRoute:"/add-project",buttonLabel:"Add Project"}),Object(H.jsx)("hr",{}),s.key?a?Object(H.jsx)("div",{children:a.map((function(e){return Object(H.jsx)(yt,{project:e,isManager:i,deleteProject:o},e.id)}))}):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"There is no registered project for this lab so far"})}):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"Please select a lab"})})]})})})},wt=void 0,kt=function(e){var t=Object(c.useState)(""),a=Object(V.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(V.a)(r,2),o=i[0],m=i[1],h=Object(l.c)((function(e){return e.selectedLab})),j=Object(l.c)((function(e){return e.security.user}));Object(c.useEffect)((function(){h&&(P(),D(h,j)||wt.props.history.push("/projects"))}),[h,j]);var p=function(){var t=Object(u.a)(d.a.mark((function t(a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c={name:n,labKey:h.key},t.prev=2,t.next=5,b.a.post("/api/lab-manager/project",c);case 5:e.history.push("/projects"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),m(t.t0.response.data);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Add Project"}),Object(H.jsxs)("p",{className:"lead text-center",children:["Add a project for ",h.name]}),Object(H.jsx)("br",{}),o.message&&Object(H.jsx)("h5",{className:"invalid-input",children:o.message}),Object(H.jsxs)("form",{onSubmit:p,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"username",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:n,onChange:function(e){return s(e.target.value)},type:"text",className:oe()("form-control form-control-lg",{"is-invalid":o.name}),placeholder:"project name"}),o.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:o.name})]})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Add Project"})]})]})})})},St=function(e){var t=Object(c.useState)(""),a=Object(V.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(V.a)(r,2),o=i[0],m=i[1],h=Object(c.useState)(""),j=Object(V.a)(h,2),p=j[0],O=j[1],f=Object(l.c)((function(e){return e.selectedLab})),x=Object(l.c)((function(e){return e.security.user})),v=e.match.params.id;Object(c.useEffect)((function(){f&&(P(),D(f,x)||e.history.push("/projects"))}),[f,x,e.history]),Object(c.useEffect)((function(){b.a.get("/api/lab-manager/project/".concat(v)).then((function(e){O(e.data),s(e.data.name)}))}),[]);var g=function(){var t=Object(u.a)(d.a.mark((function t(a){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c={name:n,labKey:f.key},t.prev=2,t.next=5,b.a.put("/api/lab-manager/project/".concat(v),c);case 5:e.history.push("/projects"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),m(t.t0.response.data);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(H.jsx)("div",{className:"container",children:Object(H.jsx)("div",{className:"row",children:Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h1",{className:"display-4 text-center",children:"Update Project"}),Object(H.jsxs)("p",{className:"lead text-center",children:["Update ",p.name]}),Object(H.jsx)("br",{}),o.message&&Object(H.jsx)("h5",{className:"invalid-input",children:o.message}),Object(H.jsxs)("form",{onSubmit:g,children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"username",className:"col-sm-4 col-form-label",children:"name"}),Object(H.jsxs)("div",{className:"col-sm-8",children:[Object(H.jsx)("input",{name:"name",value:n,onChange:function(e){return s(e.target.value)},type:"text",className:oe()("form-control form-control-lg",{"is-invalid":o.name}),placeholder:"project name"}),o.name&&Object(H.jsx)("div",{className:"invalid-feedback",children:o.name})]})]}),Object(H.jsx)("button",{type:"submit",className:"btn btn-info btn-block mt-4",children:"Update Project"})]})]})})})},Ct=function(e){var t=e.row,a=t.ingredient;return Object(H.jsx)("li",{children:Object(H.jsxs)("div",{className:"row",children:[Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsxs)("i",{children:[t.amount," ",t.unit]})}),Object(H.jsx)("div",{className:"col-4",children:Object(H.jsx)("span",{className:"mx-auto",children:a.shortName?a.shortName:a.name})})]})})},Lt=(a(202),function(e){var t=Object(c.useState)(e.recipe)[0],a=Object(c.useState)(!1),n=Object(V.a)(a,2),s=n[0],r=n[1],i=Object(ht.a)(),l=i.getCollapseProps,o=i.getToggleProps;return Object(H.jsxs)("div",{className:"container card card-body bg-light mb-3",style:{padding:"10px"},children:[Object(H.jsxs)("div",Object(y.a)(Object(y.a)({className:"header row"},o()),{},{children:[Object(H.jsx)("div",{className:"col-4",children:Object(H.jsx)("h4",{className:"mx-auto",children:t.name})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsxs)("i",{children:[t.amount," ",t.unit]})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsxs)("i",{children:[t.shelfLifeInDays," day",t.shelfLifeInDays>1?"s":""]})}),Object(H.jsx)("div",{className:"col-3"}),Object(H.jsx)("div",{className:"col-sm-3",children:e.isManager&&Object(H.jsx)(xe,{updateDisabled:!0,updateFormTo:"/update-recipe/".concat(t.id),onDelete:function(){return r(!0)}})})]})),Object(H.jsxs)("div",Object(y.a)(Object(y.a)({},l()),{},{children:[Object(H.jsxs)("div",{className:"content",style:{padding:"10px"},children:[t.chemicalIngredients.length>0&&Object(H.jsxs)("div",{children:[Object(H.jsx)("p",{children:Object(H.jsx)("strong",{children:"Chemical Ingredients"})}),Object(H.jsx)("ul",{children:t.chemicalIngredients.map((function(e){return Object(H.jsx)(Ct,{row:e},e.id)}))})]}),t.recipeIngredients.length>0&&Object(H.jsxs)("div",{children:[Object(H.jsx)("p",{children:Object(H.jsx)("strong",{children:"Recipe Ingredients"})}),Object(H.jsx)("ul",{children:t.recipeIngredients.map((function(e){return Object(H.jsx)(Ct,{row:e},e.id)}))})]})]}),s&&Object(H.jsx)(bt,{onCancel:function(){return r(!1)},veryfyMessage:"Are you sure you want to delete recipe ".concat(t.name,"?"),onSubmit:function(){return e.deleteRecipe(t.id)},buttonLabel:"Delete"})]}))]})}),Mt=function(e){var t=Object(W.useLocation)(),a=Object(c.useState)([]),n=Object(V.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)([]),o=Object(V.a)(i,2),m=o[0],h=o[1],j=Object(c.useState)(""),p=Object(V.a)(j,2),O=p[0],f=p[1],x=Object(c.useState)(t.state?t.state.detail.justAddedRecipe:""),v=Object(V.a)(x,2),g=(v[0],v[1],Object(l.c)((function(e){return e.selectedLab}))),y=Object(l.c)((function(e){return e.security.user}));Object(c.useEffect)((function(){g&&(P(),t.state?f(t.state.detail.selectedProject):f(""),b.a.get("/api/logged-in/project/".concat(g.key)).then((function(e){r(e.data)})))}),[g]),Object(c.useEffect)((function(){O&&(P(),b.a.get("/api/logged-in/recipe/".concat(O.id)).then((function(e){h(e.data)})))}),[O]);var N=g.key&&g.labManagers.filter((function(e){return e.username===y.username})).length>0,w=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("/api/lab-manager/recipe/".concat(t));case 2:h((function(e){return e.filter((function(e){return e.id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"container col-md-12",children:[Object(H.jsx)("h3",{className:"display-4 text-center",children:"Recipes"}),Object(H.jsxs)("p",{className:"lead text-center",children:["List ",N?" and manage":""," the recipes of ",g.name]}),Object(H.jsx)("br",{}),N&&Object(H.jsx)(Oe,{objectToPass:{formRoute:"/add-recipe",selectedProject:O},buttonLabel:"Add Recipe"}),Object(H.jsx)("hr",{}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"chemical",className:"col-sm-2 col-form-label",children:"project"}),Object(H.jsx)("div",{className:"col-sm-10",children:Object(H.jsx)(X.a,{options:s,values:s.filter((function(e){return O&&e.id===O.id})),labelField:"name",valueField:"name",placeholder:"project",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){var t=e[0];t&&f(t)}})})]}),g.key&&O?m.map((function(e){return Object(H.jsx)(Lt,{recipe:e,isManager:N,deleteRecipe:w},e.id)})):Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"Please select a recipe"})})]})},It=a(126),At=function(e){var t=e.label,a=e.units,c=e.entities,n=e.ingredient,s=e.ingredients,r=e.setIngredients,i=e.handleOnRemove,l=e.isLast,o=function(e,t){var a=Object(y.a)({},n);a[e]=t;var c=s.map((function(e){return e.nr===n.nr?a:e}));r(c)};return Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("div",{className:"col-sm-6",children:Object(H.jsx)(X.a,{options:c,values:n.ingredient?[n.ingredient]:[],labelField:t,valueField:"id",placeholder:"ingredient",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},className:oe()("form-control form-control-lg",{"is-invalid":!l&&!n.ingredient}),onChange:function(e){return o("ingredient",e[0])}})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)("input",{name:"amount",value:n.amount,onChange:function(e){return o("amount",parseFloat(e.target.value))},type:"number",step:"0.001",min:"0.001",className:oe()("form-control form-control-lg",{"is-invalid":!l&&!n.amount}),placeholder:"amount"})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)(X.a,{options:a,values:[{unit:n.unit}],labelField:"unit",placeholder:"unit",valueField:"unit",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},className:oe()("form-control form-control-lg",{"is-invalid":!l&&!n.unit}),onChange:function(e){return e[0]&&o("unit",e[0].unit)}})}),Object(H.jsx)("div",{className:"col-sm-2",children:!l&&Object(H.jsx)("button",{onClick:function(){return i(n.nr)},className:"btn btn-outline-danger",style:{height:"42px",fontSize:"16px"},children:Object(H.jsx)("i",{className:"fas fa-times-circle"})})})]})},Dt=function(e){var t=Object(l.c)((function(e){return e.selectedLab})),a=e.projectId,n=e.chemicalIngredients,s=e.setChemicalIngredients,r=e.recipeIngredients,i=e.setRecipeIngredients,o=e.units,d=e.handleChemicalOnRemove,u=e.handleRecipeOnRemove,m=Object(c.useState)([]),h=Object(V.a)(m,2),j=h[0],p=h[1],O=Object(c.useState)([]),f=Object(V.a)(O,2),x=f[0],v=f[1],g=Object(c.useState)([]),y=Object(V.a)(g,2),N=y[0],w=y[1],k=Object(c.useState)([]),S=Object(V.a)(k,2),C=S[0],L=S[1];return Object(c.useEffect)((function(){b.a.get("/api/logged-in/chemical/".concat(t.key)).then((function(e){return p(e.data)})),b.a.get("/api/logged-in/recipe/".concat(a)).then((function(e){return w(e.data)}))}),[a,t]),Object(c.useEffect)((function(){var e=n.map((function(e){return e.ingredient&&e.ingredient.id}));v(j.filter((function(t){return!e.includes(t.id)})))}),[n,j]),Object(c.useEffect)((function(){var e=r.map((function(e){return e.ingredient&&e.ingredient.id}));L(N.filter((function(t){return!e.includes(t.id)})))}),[r,N]),Object(H.jsxs)("div",{children:[Object(H.jsx)("h3",{className:"display-8",children:"Chemical ingredients"}),n.map((function(e,t){return Object(H.jsx)(At,{label:"shortName",ingredient:e,ingredients:n,setIngredients:s,entities:x,handleOnRemove:d,units:o,isLast:n.length-1===t},e.nr)})),Object(H.jsx)("h3",{className:"display-8",children:"Recipe ingredients"}),r.map((function(e,t){return Object(H.jsx)(At,{label:"name",ingredient:e,ingredients:r,setIngredients:i,entities:C,handleOnRemove:u,units:o,isLast:r.length-1===t},e.nr)}))]})},Ft=function(e){var t=e.isUpdate,a=e.units,n=e.errors,s=e.selectedProject,r=e.setSelectedProject,i=e.name,o=e.setName,d=e.amount,u=e.setAmount,m=e.unit,h=e.setUnit,j=e.shelfLifeInDays,p=e.setShelfLifeInDays,O=Object(c.useState)([]),f=Object(V.a)(O,2),x=f[0],v=f[1],g=Object(l.c)((function(e){return e.selectedLab}));return Object(c.useEffect)((function(){b.a.get("/api/logged-in/project/".concat(g.key)).then((function(e){v(e.data)}))}),[]),Object(H.jsxs)("div",{children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"project",className:"col-sm-2 col-form-label",children:"project"}),Object(H.jsx)("div",{className:"col-sm-10",children:Object(H.jsx)(X.a,{disabled:t,options:x,values:x.filter((function(e){return s&&e.id===s.id})),labelField:"name",valueField:"name",placeholder:"project",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){return r(e[0]?e[0]:"")}})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"name",className:"col-sm-2 col-form-label",children:"recipe name"}),Object(H.jsxs)("div",{className:"col-sm-10",children:[Object(H.jsx)("input",{name:"name",value:i,onChange:function(e){return o(e.target.value)},type:"text",className:oe()("form-control form-control-lg",{"is-invalid":n.name}),placeholder:"name"}),n.name&&Object(H.jsx)("div",{className:"text-danger",children:n.name})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"amount",className:"col-sm-2 col-form-label",children:"amount"}),Object(H.jsxs)("div",{className:"col-sm-10",children:[Object(H.jsx)("input",{name:"amount",value:d,onChange:function(e){return u(parseFloat(e.target.value))},type:"number",className:oe()("form-control form-control-lg",{"is-invalid":n.amount}),placeholder:"amount",min:"0.000",step:"0.001"}),n.amount&&Object(H.jsx)("div",{className:"text-danger",children:n.amount})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"unit",className:"col-sm-2 col-form-label",children:"unit"}),Object(H.jsxs)("div",{className:"col-sm-10",children:[Object(H.jsx)(X.a,{options:a,values:[m],labelField:"unit",placeholder:"unit",valueField:"unit",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},className:oe()("form-control form-control-lg",{"is-invalid":n.unit}),onChange:function(e){return h(e[0]?{unit:e[0].unit}:"")}}),n.unit&&Object(H.jsx)("div",{className:"text-danger",children:n.unit})]})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"shelfLifeInDays",className:"col-sm-2 col-form-label",children:"shelf life (days)"}),Object(H.jsxs)("div",{className:"col-sm-10",children:[Object(H.jsx)("input",{name:"shelfLifeInDays",value:j,onChange:function(e){return p(e.target.value)},type:"number",className:oe()("form-control form-control-lg",{"is-invalid":n.shelfLifeInDays}),placeholder:"shelf life (days)",min:"0"}),n.shelfLifeInDays&&Object(H.jsx)("div",{className:"text-danger",children:n.shelfLifeInDays})]})]})]})},Et=function(e){var t=Object(W.useLocation)(),a=Object(It.useHistory)(),n=e.match.params.id?"Update":"Add",s=Object(l.c)((function(e){return e.selectedLab})),r=Object(c.useState)(""),i=Object(V.a)(r,2),o=i[0],m=i[1],h=Object(c.useState)([]),j=Object(V.a)(h,2),p=j[0],O=j[1],f=Object(c.useState)(""),x=Object(V.a)(f,2),v=x[0],g=x[1],y=Object(c.useState)(""),N=Object(V.a)(y,2),w=N[0],k=N[1],S=Object(c.useState)(""),C=Object(V.a)(S,2),L=C[0],M=C[1],I=Object(c.useState)(""),A=Object(V.a)(I,2),D=A[0],F=A[1],E=Object(c.useState)(""),U=Object(V.a)(E,2),R=U[0],T=U[1],B=Object(c.useState)(!0),z=Object(V.a)(B,2),_=z[0],q=z[1],K=Object(c.useState)([{nr:0,amount:""}]),J=Object(V.a)(K,2),X=J[0],G=J[1],Q=Object(c.useState)([{nr:0,amount:""}]),Y=Object(V.a)(Q,2),Z=Y[0],$=Y[1],ee=Object(c.useState)(""),te=Object(V.a)(ee,2),ae=te[0],ce=te[1],ne=Object(c.useState)(""),se=Object(V.a)(ne,2),re=se[0],ie=se[1],le=Object(c.useRef)(),oe=function(e,t){return e.filter((function(e){return e.ingredient&&e.ingredient.id&&e.unit&&e.amount})).map((function(e){return{type:t,ingredientId:e.ingredient.id,amount:parseInt(e.amount),unit:e.unit}}))};Object(c.useEffect)((function(){v&&(k(v.name),M(v.amount),F({unit:v.unit}),T(v.shelfLifeInDays),G(v.chemicalIngredients.map((function(e,t){return{nr:t,ingredient:e.ingredient,amount:e.amount,unit:e.unit}}))),$(v.recipeIngredients.map((function(e,t){return{nr:t,ingredient:e.ingredient,amount:e.amount,unit:e.unit}}))),m(v.project))}),[v]),Object(c.useEffect)((function(){var c;P(),(c=e.match.params.id)?b.a.get("/api/lab-manager/recipe/".concat(c)).then((function(e){return g(e.data)})).catch((function(){return a.push("/recipes")})):m(t.state.selectedProject),b.a.get("/api/chem-item/unit").then((function(e){return O(e.data.map((function(e){return{unit:e}})))}))}),[]),Object(c.useEffect)((function(){if(P(),1===X.length&&1===Z.length)return q(!0);if(!o||!o.id||!w||L<.001||!D.unit||!R||parseInt(R)<0)return q(!0);if(X.slice(0,X.length-1).filter((function(e){return!e.ingredient||!e.ingredient.id||!e.unit||!e.amount})).length>0)q(!0);else{var e=Z.slice(0,Z.length-1).filter((function(e){return!e.ingredient||!e.ingredient.id||!e.unit||!e.amount}));q(e.length>0)}}),[X,Z,o,w,L,D,R]),Object(c.useEffect)((function(){(0===X.length||X[X.length-1].ingredient)&&G((function(e){return[].concat(Object(et.a)(e),[{nr:X.length}])}))}),[X]),Object(c.useEffect)((function(){(0===Z.length||Z[Z.length-1].ingredient)&&$((function(e){return[].concat(Object(et.a)(e),[{nr:Z.length}])}))}),[Z]),Object(c.useEffect)((function(){(!s||le.current&&le.current.id!==s.id)&&e.history.push("/recipes"),le.current=s}),[s]);var de=function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return e.abrupt("return",b.a.put("/api/lab-manager/recipe/".concat(a.id),t));case 4:return e.abrupt("return",b.a.post("/api/lab-manager/recipe",t));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t,a).then((function(e){return ce(e.data)})).catch((function(e){return ie(e.response.data)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={projectId:o.id,name:w,amount:L,unit:D.unit,shelfLifeInDays:parseInt(R),ingredients:oe(X,"CHEMICAL").concat(oe(Z,"RECIPE"))},e.next=5,ue(a,v);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){a.push({pathname:"/recipes",state:{detail:{selectedProject:o}}})},he=Object(H.jsxs)("button",{type:"submit",className:"btn btn-info mt-4",disabled:_,children:[n," Recipe"]});return Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsxs)("h1",{className:"display-4 text-center",children:[n," Recipe"]}),Object(H.jsx)("br",{}),re.message&&Object(H.jsx)("h5",{className:"text-danger",children:re.message}),Object(H.jsxs)("form",{onSubmit:me,children:[he,Object(H.jsx)(Ft,{isUpdate:v,units:p,errors:re,selectedProject:o,setSelectedProject:m,name:w,setName:k,amount:L,setAmount:M,unit:D,setUnit:F,shelfLifeInDays:R,setShelfLifeInDays:T}),re.ingredients&&Object(H.jsx)("div",{className:"text-danger",children:re.ingredients}),o&&Object(H.jsx)(Dt,{projectId:o.id,chemicalIngredients:X,setChemicalIngredients:G,recipeIngredients:Z,setRecipeIngredients:$,units:p,handleChemicalOnRemove:function(e){G(X.filter((function(t){return t.nr!==e})))},handleRecipeOnRemove:function(e){$(Z.filter((function(t){return t.nr!==e})))}}),ae&&Object(H.jsx)(bt,{onCancel:function(){return be()},veryfyMessage:function(){var e=v?"(".concat(v.name,")"):"";return"Recipe ".concat(ae.name," ").concat(e," was successfully ").concat(v?"updated":"created"," in project ").concat(o.name," in lab ").concat(s.name)}(),buttonLabel:"Ok"}),he]}),Object(H.jsx)("div",{style:{height:"600px",width:"100%",clear:"both"}})]})},Pt=a(226),Ut=a(227),Rt=a(228),Tt=a(229),Bt=a(230),zt=a(231),_t=a(232),qt=function(e){var t=e.mixture,a=e.type,c=t.recipe,n="CHEM_ITEM"===a?c.chemicalIngredients:c.recipeIngredients,s=function(e){return"CHEM_ITEM"===a?function(e){var a=e.ingredient.id,n=t.chemItems.filter((function(e){return e.chemical.id===a}))[0],s=n.chemical;return{id:a,name:s.shortName,amount:e.amount/c.amount*t.amount,unit:e.unit,identifier:"".concat(n.batchNumber,"-").concat(n.seqNumber),manufacturerName:n.manufacturer.name}}(e):function(e){var a=e.ingredient.id,n=t.mixtureItems.filter((function(e){return e.recipe.id===a}))[0];return{id:n.id,name:n.recipe.name,amount:e.amount/c.amount*t.amount,unit:e.unit,manufacturerName:"",identifier:n.id}}(e)};return Object(H.jsx)(Pt.a,{component:Ut.a,children:Object(H.jsxs)(Rt.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(H.jsx)(Tt.a,{children:Object(H.jsxs)(Bt.a,{children:[Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:"ingredient name"})}),Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:"amount"})}),Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:"CHEM_ITEM"===a?"batch-seq":"mixture id"})}),Object(H.jsx)(zt.a,{align:"left",style:{opacity:"CHEM_ITEM"===a?"1.0":"0.0"},children:Object(H.jsx)("strong",{children:"manufacturer"})})]})}),Object(H.jsx)(_t.a,{children:n.map((function(e){var t=s(e);return Object(H.jsxs)(Bt.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(H.jsx)(zt.a,{children:t.name}),Object(H.jsxs)(zt.a,{children:[t.amount," ",t.unit]}),Object(H.jsx)(zt.a,{children:t.identifier}),Object(H.jsx)(zt.a,{align:"left",children:t.manufacturerName})]},t.id)}))})]})})},Ht=function(e){var t=e.mixture,a=t.recipe,n=Object(c.useState)(!1),s=Object(V.a)(n,2),r=s[0],i=s[1],l=Object(ht.a)(),o=l.getCollapseProps,d=l.getToggleProps;return Object(H.jsxs)("div",{className:"container card card-body bg-light mb-3 ".concat(function(e){return new Date(e.expirationDate)<(new Date).setHours(0,0,0,0)}(t)?"unavailable":""),style:{paddingTop:"5px",paddingBottom:"0px",paddingRight:"10px",paddingLeft:"10px"},children:[Object(H.jsxs)("div",Object(y.a)(Object(y.a)({className:"header row"},d()),{},{children:[Object(H.jsx)("div",{className:"col-1",children:Object(H.jsx)("i",{className:"mx-small",children:t.id})}),Object(H.jsx)("div",{className:"col-3",children:Object(H.jsx)("h4",{className:"mx-auto",children:a.name})}),Object(H.jsx)("div",{className:"col-2",children:Object(H.jsx)("h4",{className:"mx-auto",children:a.project.name})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsxs)("i",{children:[t.amount," ",a.unit]})}),Object(H.jsxs)("div",{className:"col-sm-2",children:[Object(H.jsx)("i",{children:t.creationDate}),Object(H.jsx)("br",{}),Object(H.jsxs)("i",{children:["(by ",t.creator.fullName,")"]})]}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("i",{children:t.expirationDate})}),Object(H.jsx)("div",{className:"col-sm-2",children:e.isManager&&Object(H.jsx)(xe,{updateDisabled:!1,updateFormTo:"/update-mixture/".concat(t.id),onDelete:function(){return i(!0)}})})]})),Object(H.jsxs)("div",Object(y.a)(Object(y.a)({},o()),{},{children:[Object(H.jsxs)("div",{className:"content",style:{padding:"10px"},children:[a.chemicalIngredients.length>0&&Object(H.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(H.jsx)("i",{children:Object(H.jsx)("strong",{children:"Chemical Ingredients"})}),Object(H.jsx)(qt,{mixture:t,type:"CHEM_ITEM"})]}),a.recipeIngredients.length>0&&Object(H.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(H.jsx)("i",{children:Object(H.jsx)("strong",{children:"Mixture Ingredients"})}),Object(H.jsx)(qt,{mixture:t,type:"MIXTURE"})]})]}),r&&Object(H.jsx)(bt,{onCancel:function(){return i(!1)},veryfyMessage:"Are you sure you want to delete \n                            mixture ".concat(a.name," (").concat(t.identifier,", ").concat(t.amount," ").concat(a.unit,", created on ").concat(t.creationDate,")?"),onSubmit:function(){return e.deleteMixture(t.id)},buttonLabel:"Delete"})]}))]})};function Kt(){return Object(H.jsxs)("div",{className:"bg-white mb-2 row",style:{padding:"2px"},children:[Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"id"})}),Object(H.jsx)("div",{className:"col-3",children:Object(H.jsx)("h4",{className:"mx-auto",children:"name"})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)("h4",{children:"project"})}),Object(H.jsx)("div",{className:"col-1",children:Object(H.jsx)("h4",{className:"mx-auto",children:"amount"})}),Object(H.jsx)("div",{className:"col-sm-2",children:Object(H.jsx)("h4",{children:"created"})}),Object(H.jsx)("div",{className:"col-sm-1",children:Object(H.jsx)("h4",{children:"expire"})}),Object(H.jsx)("div",{className:"col-sm-2"})]})}var Wt=function(){var e=Object(l.c)((function(e){return e.selectedLab})),t=Object(l.c)((function(e){return e.security.user})),a=Object(c.useState)([]),n=Object(V.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)([]),o=Object(V.a)(i,2),m=o[0],h=o[1],j=Object(c.useState)(""),p=Object(V.a)(j,2),O=p[0],f=p[1],x=Object(c.useState)(!0),v=Object(V.a)(x,2),g=v[0],y=v[1],N=Object(c.useState)(""),w=Object(V.a)(N,2),k=w[0],S=w[1],C=Object(c.useState)(1),L=Object(V.a)(C,2),M=L[0],I=L[1],A=Object(c.useState)(1),D=Object(V.a)(A,2),F=D[0],E=D[1],U=Object(c.useState)(10),R=Object(V.a)(U,2),T=R[0],B=(R[1],e.key&&e.labManagers.filter((function(e){return e.username===t.username})).length>0);Object(c.useEffect)((function(){e&&(f(""),b.a.get("/api/logged-in/project/".concat(e.key)).then((function(e){return h(e.data)})))}),[e]),Object(c.useEffect)((function(){P(),e&&b.a.get("/api/mixture/".concat(e.key).concat(function(){var e="?page=".concat(F-1,"&size=").concat(T);return e="".concat(e).concat(O?"&projectId="+O.id:""),"".concat(e).concat(g?"&available=true":"")}())).then((function(e){r(e.data.content),I(e.data.totalItems)}))}),[e,F,T,O,g]);var z=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.delete("/api/mixture/".concat(t));case 3:r((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),S(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"container col-md-12",children:[Object(H.jsxs)("div",{className:"row",style:{position:"relative"},children:[Object(H.jsx)("div",{style:{position:"absolute",bottom:"0",left:"0"},children:Object(H.jsx)(Oe,{formRoute:"/add-mixture",buttonLabel:"Add Mixture"})}),Object(H.jsxs)("div",{className:"text-center",children:[Object(H.jsx)("h3",{className:"display-4",children:"Mixtures"}),Object(H.jsxs)("p",{className:"lead",children:["List the mixtures and eluents of ",e.name]})]})]}),Object(H.jsx)("br",{}),Object(H.jsxs)("div",{className:"w-300 px-4 py-0 d-flex flex-row",children:[Object(H.jsxs)("div",{className:"col-sm-4 d-flex py-2 align-items-center",children:[Object(H.jsx)("div",{className:"col-sm-4",children:Object(H.jsx)(nt,{totalRecords:M,pageLimit:10,pageNeighbours:1,onPageChanged:function(e){return E(e.currentPage)}})}),Object(H.jsxs)("div",{className:"col-sm-8 pad-chckbx",children:[Object(H.jsx)("input",{type:"checkbox",checked:g,onChange:function(){return y(!g)}}),Object(H.jsx)("label",{className:"pad-5",children:"Only available"})]})]}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:m,labelField:"name",valueField:"name",values:m.filter((function(e){return O&&e.id===O.id})),placeholder:"project",searchable:!1,clearable:!0,style:{height:"42px",fontSize:"16px"},onChange:function(e){return f(e[0]?e[0]:"")}})})]}),Object(H.jsx)("hr",{}),0===s.length?Object(H.jsx)("p",{className:"lead",children:Object(H.jsx)("i",{children:"There is no mixture in the lab (according to the filter criteria)"})}):Object(H.jsxs)("div",{children:[Object(H.jsx)(Kt,{}),Object(H.jsx)("hr",{}),s.map((function(e){return Object(H.jsx)(Ht,{mixture:e,deleteMixture:z,isManager:B},e.id)}))]}),k&&Object(H.jsx)(bt,{onCancel:function(){return S("")},veryfyMessage:k,buttonLabel:"Ok"})]})},Vt=function(e){var t=e.ingredientRow,a=e.type,n=e.amountFactor,s=e.selectedItems,r=e.setSelectedItems,i=e.setSpacer,o=e.posFromLast,d=e.creationDate,u=t.ingredient,m=50*o,h="CHEM_ITEM"===a,j=Object(l.c)((function(e){return e.selectedLab})),p=Object(c.useState)(s[u.id]),O=Object(V.a)(p,2),f=O[0],x=O[1],v=Object(c.useState)([]),g=Object(V.a)(v,2),N=g[0],w=g[1],k=Object(c.useState)(!1),S=Object(V.a)(k,2),C=S[0],L=S[1];return Object(c.useEffect)((function(){0==s.length&&x("")}),[s]),Object(c.useEffect)((function(){if(f){var e={};e[u.id]=f,r(Object(y.a)(Object(y.a)({},s),e))}}),[f]),Object(c.useEffect)((function(){j&&(h?function(){var e;e=d?"/api/chem-item/".concat(j.key,"?chemicalId=").concat(u.id,"&availableOn=").concat(d,"&size=100"):"/api/chem-item/".concat(j.key,"?chemicalId=").concat(u.id,"&opened=true&expired=false&consumed=false&size=100"),b.a.get(e).then((function(e){w(e.data.content.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{label:"".concat(e.manufacturer.name,", ").concat(e.batchNumber,"-").concat(e.seqNumber," (opened on ").concat(e.openingDate,", expires on ").concat(e.expirationDate,")")})})))}))}():function(){var e;e=d?"/api/mixture/".concat(j.key,"?recipeId=").concat(u.id,"&availableOn=").concat(d,"&size=100"):"/api/mixture/".concat(j.key,"?recipeId=").concat(u.id,"&available=false&size=100"),b.a.get(e).then((function(e){w(e.data.content.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{label:"".concat(e.id," (created on ").concat(e.creationDate," by ").concat(e.creator.fullName,", expires on ").concat(e.creationDate,")")})})))}))}())}),[j,d]),Object(c.useEffect)((function(){if(C){var e=15+30*(N.length?N.length:1);e>m&&i(e-m)}else i(0)}),[C]),Object(H.jsxs)(Bt.a,{children:[Object(H.jsx)(zt.a,{children:h?u.shortName:u.name}),Object(H.jsx)(zt.a,{style:{width:"500px"},children:Object(H.jsx)(X.a,{options:N,values:N.filter((function(e){return f&&e.id===f.id})),onDropdownOpen:function(){return L(!0)},onDropdownClose:function(){return L(!1)},labelField:"label",valueField:"id",placeholder:"item",searchable:!1,clearable:!1,style:{height:"30px",width:"500px",fontSize:"12px",menuPortal:function(e){return Object(y.a)(Object(y.a)({},e),{},{zIndex:9999})}},onChange:function(e){return x(e[0]?e[0]:"")}})}),Object(H.jsx)(zt.a,{children:(n*t.amount).toFixed(3)}),Object(H.jsxs)(zt.a,{align:"left",children:[" ",t.unit]})]},u.id)},Jt=function(e){var t=e.recipe,a=e.amount,n=e.ingredients,s=e.setSelectedItems,r=e.selectedItems,i=e.type,l=e.creationDate,o=Object(c.useState)(0),d=Object(V.a)(o,2),u=d[0],m=d[1],b="CHEM_ITEM"===i;return Object(H.jsx)("div",{children:n&&n.length>0&&Object(H.jsxs)("div",{style:{paddingBottom:"20px"},children:[Object(H.jsxs)("h3",{className:"display-8",children:[b?"Chemical":"Mixture"," ingredients"]}),Object(H.jsx)(Pt.a,{component:Ut.a,children:Object(H.jsxs)(Rt.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(H.jsx)(Tt.a,{children:Object(H.jsxs)(Bt.a,{children:[Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:"ingredient name"})}),Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:b?"manufacturer, batch-seq":"mixture id"})}),Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:"amount"})}),Object(H.jsx)(zt.a,{align:"left",children:Object(H.jsx)("strong",{children:"unit"})})]})}),Object(H.jsxs)(_t.a,{children:[n.map((function(e,c){return Object(H.jsx)(Vt,{type:i,amountFactor:a/t.amount,ingredientRow:e,setSelectedItems:s,selectedItems:r,posFromLast:n.length-c-1,setSpacer:m,creationDate:l},e.ingredient.id)})),Object(H.jsx)(zt.a,{style:{height:"".concat(u,"px")}})]})]})})]})})},Xt=function(e){var t=e.match.params.id,a=Object(l.c)((function(e){return e.selectedLab})),n=Object(l.c)((function(e){return e.security.user})),s=Object(c.useState)([]),r=Object(V.a)(s,2),i=r[0],o=r[1],m=Object(c.useState)([]),h=Object(V.a)(m,2),j=h[0],p=h[1],O=Object(c.useState)(""),f=Object(V.a)(O,2),x=f[0],v=f[1],g=Object(c.useState)(""),y=Object(V.a)(g,2),N=y[0],w=y[1],k=Object(c.useState)(""),S=Object(V.a)(k,2),C=S[0],L=S[1],M=Object(c.useState)(""),I=Object(V.a)(M,2),A=I[0],F=I[1],E=Object(c.useState)(""),U=Object(V.a)(E,2),R=U[0],T=U[1],B=Object(c.useState)(""),z=Object(V.a)(B,2),_=z[0],q=z[1],K=Object(c.useState)(""),W=Object(V.a)(K,2),J=W[0],G=W[1],Q=Object(c.useState)(),Y=Object(V.a)(Q,2),Z=Y[0],$=Y[1],ee=Object(c.useState)(""),te=Object(V.a)(ee,2),ae=te[0],ce=te[1],ne=D(a,n),se=Object(c.useRef)(),re=Object(c.useState)(""),ie=Object(V.a)(re,2),le=ie[0],de=ie[1];Object(c.useEffect)((function(){t&&b.a.get("/api/mixture/".concat(a.key,"/").concat(t)).then((function(e){v(e.data)})).catch((function(){return e.history.push("/mixtures")}))}),[]),Object(c.useEffect)((function(){if(x){w(x.recipe.project),L(x.recipe),F(x.amount);var e={};x.chemItems.forEach((function(t){e[t.chemical.id]=t})),q(e);var t={};x.mixtureItems.forEach((function(e){t[e.recipe.id]=e})),G(t)}}),[x]),Object(c.useEffect)((function(){P(),se.current&&se.current.id!==a.id&&e.history.push("/mixtures"),a&&b.a.get("/api/logged-in/project/".concat(a.key)).then((function(e){o(e.data)})),se.current=a}),[a]),Object(c.useEffect)((function(){N?b.a.get("/api/logged-in/recipe/".concat(N.id)).then((function(e){p(e.data)})):p([])}),[N]);var ue=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=4;break}return e.abrupt("return",b.a.put("/api/mixture/".concat(x.id),t));case 4:return e.abrupt("return",b.a.post("/api/mixture",t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={recipeId:C.id,creationDate:(new Date).toISOString().split("T")[0],username:n.username,amount:A,chemItemIds:Object.values(_).map((function(e){return e.id})),mixtureItemIds:Object.values(J).map((function(e){return e.id}))},e.next=5,ue(a).then((function(e){return de(e.data)})).catch((function(e){return ce(e.response.data)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=t?"Update":"Add",he=Object(H.jsxs)("button",{type:"submit",className:"btn btn-info mt-4",disabled:!1,children:[be," Mixture"]});return Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsxs)("h1",{className:"display-4 text-center",children:[be," Mixture"]}),Object(H.jsx)("br",{}),ae.message&&Object(H.jsx)("h5",{className:"text-danger",children:ae.message}),Object(H.jsxs)("form",{onSubmit:me,children:[he,Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"project",className:"col-sm-2 col-form-label",children:"project"}),Object(H.jsx)("div",{className:"col-sm-10",children:Object(H.jsx)(X.a,{disabled:t,options:i,values:i.filter((function(e){return N&&e.id===N.id})),labelField:"name",valueField:"name",placeholder:"project",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){return w(e[0]?e[0]:"")}})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"project",className:"col-sm-2 col-form-label",children:"recipe"}),Object(H.jsx)("div",{className:"col-sm-10",children:Object(H.jsx)(X.a,{disabled:t,options:j,values:j.filter((function(e){return C&&e.id===C.id})),labelField:"name",valueField:"id",placeholder:"recipe",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){return function(e){t||(L(e),G([]),q([]))}(e[0]?e[0]:"")}})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"amount",className:"col-sm-2 col-form-label",children:"amount"}),Object(H.jsxs)("div",{className:"col-sm-10",children:[Object(H.jsx)("input",{name:"amount",value:A,onChange:function(e){return F(parseFloat(e.target.value))},type:"number",className:oe()("form-control form-control-lg",{"is-invalid":ae.amount}),placeholder:"amount",min:"0.000",step:"0.001"}),ae.amount&&Object(H.jsx)("div",{className:"text-danger",children:ae.amount})]})]}),function(){if(ne)return Object(H.jsxs)("div",{children:[Object(H.jsxs)("div",{className:"form-group row mb-3 align-items-center",children:[Object(H.jsx)("label",{htmlFor:"changeCraetionDate",className:"col-sm-2 col-form-label",children:"change creation date"}),Object(H.jsx)("div",{className:"col-sm-10",children:Object(H.jsx)("input",{type:"checkbox",checked:Z,onChange:function(){return $(!Z)}})})]}),Z&&Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"amount",className:"col-sm-2 col-form-label",children:"creation date"}),Object(H.jsxs)("div",{className:"col-sm-10",children:[Object(H.jsx)("input",{name:"creationDate",value:R,onChange:function(e){return T(e.target.value)},type:"date",className:"form-control form-control-lg "}),ae.creationDate&&Object(H.jsx)("div",{className:"text-danger",children:ae.creationDate})]})]})]})}(),Object(H.jsx)(Jt,{type:"CHEM_ITEM",recipe:C,ingredients:C.chemicalIngredients,amount:A,setSelectedItems:q,selectedItems:_,creationDate:Z&&R}),Object(H.jsx)(Jt,{type:"MIXTURE_ITEM",recipe:C,ingredients:C.recipeIngredients,amount:A,setSelectedItems:G,selectedItems:J,creationDate:Z&&R})]}),Object(H.jsx)("div",{style:{height:"600px",width:"100%",clear:"both"}}),le&&Object(H.jsx)(bt,{onCancel:function(){return e.history.push("/mixtures")},veryfyMessage:"Mixture ".concat(le.recipe.name," was successfully ").concat(x?"updated":"created"," in project ").concat(N.name," in lab ").concat(a.name),buttonLabel:"Ok"})]})},Gt=function(e){var t=e.selectedLab,a=e.updateSetters,n=e.updateValues,s=n.arrivedBy,r=n.openingDate,i=n.openedBy,l=n.consumptionDate,o=n.consumedBy,d=a.setArrivedBy,u=a.setOpeningDate,m=a.setOpenedBy,h=a.setConsumptionDate,j=a.setConsumedBy,p=Object(c.useState)([]),O=Object(V.a)(p,2),f=O[0],x=O[1];Object(c.useEffect)((function(){t&&b.a.get("/api/logged-in/user?labKey=".concat(t.key)).then((function(e){x(e.data)}))}),[t]),Object(c.useEffect)((function(){i||(u(""),j(""))}),[i]),Object(c.useEffect)((function(){i||h("")}),[o]);return Object(H.jsxs)("div",{children:[Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"arrivedBy",className:"col-sm-4 col-form-label",children:"arrived by"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:f,values:s?[s]:[],labelField:"fullName",valueField:"id",placeholder:"arrived by",searchable:!1,clearable:!1,style:{height:"42px",fontSize:"16px"},onChange:function(e){return d(e[0]?e[0]:"")}})})]}),Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"openedBy",className:"col-sm-4 col-form-label",children:"opened by"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:f,values:i?[i]:[],labelField:"fullName",valueField:"id",placeholder:"opened by",searchable:!1,clearable:!0,style:{height:"42px",fontSize:"16px"},onChange:function(e){return m(e[0]?e[0]:"")}})})]}),function(){if(i)return Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"openingDate",className:"col-sm-4 col-form-label",children:"Opening date"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"openingDate",value:r,onChange:function(e){return u(e.target.value)},type:"date",className:"form-control form-control-lg "})})]})}(),function(){if(i)return Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"consumedBy",className:"col-sm-4 col-form-label",children:"consumed by"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)(X.a,{options:f,values:o?[o]:[],labelField:"fullName",valueField:"id",placeholder:"consumed by",searchable:!1,clearable:!0,style:{height:"42px",fontSize:"16px"},onChange:function(e){return j(e[0]?e[0]:"")}})})]})}(),function(){if(o)return Object(H.jsxs)("div",{className:"form-group row mb-3",children:[Object(H.jsx)("label",{htmlFor:"consumptionDate",className:"col-sm-4 col-form-label",children:"Consumtion date"}),Object(H.jsx)("div",{className:"col-sm-8",children:Object(H.jsx)("input",{name:"consumptionDate",value:l,onChange:function(e){return h(e.target.value)},type:"date",className:"form-control form-control-lg "})})]})}()]})},Qt=function(e){var t=e.match.params.id,a=Object(c.useState)(),n=Object(V.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(""),o=Object(V.a)(i,2),m=o[0],h=o[1],j=Object(c.useState)(""),p=Object(V.a)(j,2),O=p[0],f=p[1],x=Object(c.useState)(0),v=Object(V.a)(x,2),g=v[0],y=v[1],N=Object(c.useState)(""),w=Object(V.a)(N,2),k=w[0],S=w[1],C=Object(c.useState)(""),L=Object(V.a)(C,2),M=L[0],I=L[1],A=Object(c.useState)(""),D=Object(V.a)(A,2),F=D[0],E=D[1],U=Object(c.useState)(""),R=Object(V.a)(U,2),T=R[0],B=R[1],z=Object(c.useState)(""),_=Object(V.a)(z,2),q=_[0],K=_[1],J=Object(c.useState)(""),X=Object(V.a)(J,2),Q=X[0],Y=X[1],Z=Object(c.useState)(""),$=Object(V.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)(""),ce=Object(V.a)(ae,2),ne=ce[0],se=ce[1],re=Object(c.useState)(""),ie=Object(V.a)(re,2),le=ie[0],oe=ie[1],de=Object(c.useState)(""),ue=Object(V.a)(de,2),me=ue[0],be=ue[1],he=Object(l.c)((function(e){return e.selectedLab})),je=Object(W.useHistory)();Object(c.useEffect)((function(){he&&b.a.get("/api/chem-item/".concat(he.key,"/").concat(t)).then((function(e){r(e.data)}))}),[]),Object(c.useEffect)((function(){s&&(h(s.manufacturer.id),f(s.unit),y(s.quantity),S(s.batchNumber),I(s.expirationDateBeforeOpened),E(s.arrivalDate),B(s.arrivedBy),K(s.openingDate),Y(s.openedBy),te(s.consumptionDate),se(s.consumedBy))}),[s]),Object(c.useEffect)((function(){P()}));var pe=function(){var e=Object(u.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(),t.preventDefault(),a={labKey:s.lab.key,chemicalShortName:s.chemical.shortName,manufacturerId:m,unit:O,amount:1,quantity:g,batchNumber:k,expirationDateBeforeOpened:M,arrivalDate:F,arrivedByUsername:T.username,openingDate:q,openedByUsername:Q?Q.username:"",consumptionDate:ee,consumedByUsername:ne?ne.username:""},e.next=5,b.a.put("/api/chem-item/".concat(s.id),a).then((function(e){return oe(e.data)})).catch((function(e){return be(e.response.data)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe={setManufacturerId:h,setBatchNumber:S,setQuantity:y,setUnit:f,setExpirationDateBeforeOpened:I,setArrivalDate:E},fe={setArrivedBy:B,setOpeningDate:K,setOpenedBy:Y,setConsumptionDate:te,setConsumedBy:se},xe={unit:s&&{unit:s.unit},manufacturer:s&&s.manufacturer,batchNumber:k,quantity:g,expirationDateBeforeOpened:M,arrivalDate:F},ve={arrivedBy:T,openingDate:q,openedBy:Q,consumptionDate:ee,consumedBy:ne};return Object(H.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(H.jsx)("h5",{className:"display-4 text-center",children:"Update registered chemical (chem item) in ".concat(he.name)}),Object(H.jsx)("hr",{}),Object(H.jsx)("br",{}),me.message&&Object(H.jsx)("h5",{className:"text-danger",children:me.message}),Object(H.jsxs)("form",{onSubmit:pe,children:[Object(H.jsx)(G,{chemItem:s,selectedLab:he,setters:Oe,values:xe,history:je}),Object(H.jsx)(Gt,{selectedLab:he,updateSetters:fe,updateValues:ve}),Object(H.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-4",children:"Update"})]}),le&&Object(H.jsx)(bt,{onCancel:function(){return je.push("/chem-items")},veryfyMessage:"Chemical (chem item) '".concat(le.chemical.shortName,"' \n        (").concat(le.manufacturer.name,", ").concat(le.batchNumber,"/").concat(le.seqNumber,") \n        was successfully ").concat("updated"," in lab ").concat(he.name),buttonLabel:"Ok"})]})};R();var Yt=function(){return Object(H.jsx)(l.a,{store:M,children:Object(H.jsx)(i.a,{children:Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)(K,{}),Object(H.jsx)(W.Route,{exact:!0,path:"/",component:ce}),Object(H.jsx)(W.Route,{exact:!0,path:"/login",component:be}),Object(H.jsx)(W.Route,{exact:!0,path:"/user-manual",component:gt}),Object(H.jsxs)(W.Switch,{children:[Object(H.jsx)(pe,{exact:!0,path:"/change-password",component:Ne}),Object(H.jsx)(pe,{exact:!0,path:"/users",component:ye}),Object(H.jsx)(pe,{exact:!0,path:"/add-user",component:ue}),Object(H.jsx)(pe,{exact:!0,path:"/update-user/:id",component:ke}),Object(H.jsx)(pe,{exact:!0,path:"/manufacturers",component:Le}),Object(H.jsx)(pe,{exact:!0,path:"/add-manufacturer",component:Me}),Object(H.jsx)(pe,{exact:!0,path:"/update-manufacturer/:id",component:Ie}),Object(H.jsx)(pe,{exact:!0,path:"/labs",component:ze}),Object(H.jsx)(pe,{exact:!0,path:"/add-lab",component:qe}),Object(H.jsx)(pe,{exact:!0,path:"/update-lab/:id",component:Ke}),Object(H.jsx)(pe,{exact:!0,path:"/chemicals",component:Fe}),Object(H.jsx)(pe,{exact:!0,path:"/add-chemical",component:Pe}),Object(H.jsx)(pe,{exact:!0,path:"/update-chemical/:id",component:Re}),Object(H.jsx)(pe,{exact:!0,path:"/categories",component:Ge}),Object(H.jsx)(pe,{exact:!0,path:"/add-category",component:Ye}),Object(H.jsx)(pe,{exact:!0,path:"/update-category/:id",component:$e}),Object(H.jsx)(pe,{exact:!0,path:"/projects",component:Nt}),Object(H.jsx)(pe,{exact:!0,path:"/add-project",component:kt}),Object(H.jsx)(pe,{exact:!0,path:"/update-project/:id",component:St}),Object(H.jsx)(pe,{exact:!0,path:"/recipes",component:Mt}),Object(H.jsx)(pe,{exact:!0,path:"/add-recipe",component:Et}),Object(H.jsx)(pe,{exact:!0,path:"/update-recipe/:id",component:Et}),Object(H.jsx)(pe,{exact:!0,path:"/chem-items",component:vt}),Object(H.jsx)(pe,{exact:!0,path:"/add-chem-item",component:Q}),Object(H.jsx)(pe,{exact:!0,path:"/update-chem-item/:id",component:Qt}),Object(H.jsx)(pe,{exact:!0,path:"/mixtures",component:Wt}),Object(H.jsx)(pe,{exact:!0,path:"/add-mixture",component:Xt}),Object(H.jsx)(pe,{exact:!0,path:"/update-mixture/:id",component:Xt})]})]})})})},Zt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,233)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(H.jsx)(n.a.StrictMode,{children:Object(H.jsx)(Yt,{})}),document.getElementById("root")),Zt()},95:function(e,t,a){e.exports={backdrop:"Modal_backdrop__1mfF6",modal:"Modal_modal__4DXUe","slide-down":"Modal_slide-down__W3MdX"}}},[[203,1,2]]]);
//# sourceMappingURL=main.12dbc3b3.chunk.js.map